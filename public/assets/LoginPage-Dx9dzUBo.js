import{u as h,_ as L,a as V}from"./auth-C2paokAX.js";import{P as w,r as $,c as p,d as o,x as i,l as r,J as s,a7 as S,F as f,z as F,b as d,k as I,f as _}from"./vue-Cs7Q816V.js";import{F as k,e as B,u as A,h as E,i as P,j as M}from"./index-z6GxQ8Mb.js";import{i as y,r as b,s as v,l as N}from"./primevue-BjZ91XHy.js";import"./query-D-ajdwyw.js";const R={class:"grid grid-cols-1"},U={class:"grid grid-cols-1"},j={class:"grid grid-cols-1 gap-3 my-4"},q=["src","alt"],C=w({__name:"LoginForm",props:{idps:{},error:{},isLoading:{type:Boolean}},emits:["submit"],setup(x,{emit:l}){const m=l,n=$({username:"",password:""});function c(){m("submit",n.value)}return(u,e)=>(d(),p(f,null,[o("form",{class:"space-y-3 my-6",onSubmit:S(c,["prevent"])},[o("div",R,[i(s(b),{variant:"on"},{default:r(()=>[e[2]||(e[2]=o("label",{for:"username"},"Username or Email",-1)),i(s(y),{modelValue:n.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.username=t),id:"username",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[2]})]),o("div",U,[i(s(b),{variant:"on"},{default:r(()=>[e[3]||(e[3]=o("label",{for:"password"},"Password",-1)),i(s(y),{modelValue:n.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.password=t),id:"password",type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[3]})]),i(s(v),{class:"w-full mt-3",label:"Log in with email",severity:"primary",type:"submit",loading:u.isLoading},{icon:r(()=>[i(s(k),{icon:s(B)},null,8,["icon"])]),_:1},8,["loading"])],32),o("div",j,[(d(!0),p(f,null,F(u.idps,t=>(d(),I(s(v),{key:t.name,class:"w-full",severity:"secondary",label:`Log in with ${t.name}`},{icon:r(()=>[o("img",{src:t.logo,alt:t.name,class:"w-5 h-5 object-contain"},null,8,q)]),_:2},1032,["label"]))),128))])],64))}}),z={class:"flex items-start gap-8"},J={class:"basis-3/5"},O={class:"basis-2/5"},Q=w({__name:"LoginPage",setup(x){A();const{showMessage:l}=E(),m=P(),{data:n,isLoading:c}=h(),{login:u,loginIsLoading:e,loginError:t}=M({onError:g=>{var a;l({severity:"error",summary:"An error occurred",detail:(a=g.response)==null?void 0:a.data})},onSuccess:()=>{m.push({name:"home"}),l({severity:"success",summary:"Login Successful",detail:"Successfully logged in."})}});return(g,a)=>(d(),p("div",z,[o("div",J,[a[0]||(a[0]=o("h2",{class:"text-xl font-semibold text-color my-6"},[o("span",{class:"text-secondary font-bold"},"Log in"),_(" through your institution ")],-1)),i(L,{institutions:s(n),"is-loading":s(c)},null,8,["institutions","is-loading"])]),i(s(N),{layout:"vertical",align:"center",class:"self-stretch mx-0"},{default:r(()=>a[1]||(a[1]=[o("span",{class:"text-sm font-bold"},"OR",-1)])),_:1,__:[1]}),o("div",O,[a[2]||(a[2]=o("h2",{class:"text-xl font-semibold text-color my-6"},[o("span",{class:"text-secondary font-bold"},"Log in"),_(" in without institution ")],-1)),i(C,{idps:s(V),error:s(t),"is-loading":s(e),onSubmit:s(u)},null,8,["idps","error","is-loading","onSubmit"])])]))}});export{Q as default};
