import{M as k,r as C,c as g,b as f,J as R,x as t,d as l,N as e,l as a,I as $,F as b,z as D,p as B,t as x}from"./vue-Sv2pE2s2.js";import{F as y,a3 as L,A as H,z as K,y as q,k as Q,u as Y,a7 as Z,a8 as O,w as W,a9 as X,s as ee}from"./index-7bbMbo5P.js";import{x as v,f as c,t as se,a as h,y as te,i as oe,z as le,A as ae}from"./primevue-Dphh8M7u.js";const ne={class:"mt-5 mb-4 flex items-center gap-2",for:"remember"},ie=k({__name:"LoginForm",props:{error:{},isLoading:{type:Boolean}},emits:["submit"],setup(_,{emit:u}){const p=u,o=C({username:"",password:"",remember:!1});function d(){p("submit",o.value)}return(w,s)=>(f(),g("form",{class:"space-y-3",onSubmit:R(d,["prevent"])},[t(e(v),{variant:"on"},{default:a(()=>[s[3]||(s[3]=l("label",{for:"username"},"Username or Email",-1)),t(e(c),{modelValue:o.value.username,"onUpdate:modelValue":s[0]||(s[0]=n=>o.value.username=n),id:"username",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[3]}),t(e(v),{variant:"on"},{default:a(()=>[s[4]||(s[4]=l("label",{for:"password"},"Password",-1)),t(e(c),{modelValue:o.value.password,"onUpdate:modelValue":s[1]||(s[1]=n=>o.value.password=n),id:"password",type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[4]}),l("label",ne,[t(e(se),{modelValue:o.value.remember,"onUpdate:modelValue":s[2]||(s[2]=n=>o.value.remember=n),"input-id":"remember",binary:""},null,8,["modelValue"]),s[5]||(s[5]=l("span",{class:"text-md"},"Ik wil ingelogd blijven op dit apparaat",-1))]),t(e(h),{class:"mt-2 w-full",label:"Log in with email",severity:"primary",type:"submit",loading:w.isLoading},{icon:a(()=>[t(e(y),{icon:e(L)},null,8,["icon"])]),_:1},8,["loading"])],32))}}),re={class:"grid grid-cols-2 gap-3"},ue={class:"grid grid-cols-1 gap-3"},de={class:"grid grid-cols-2 gap-3"},me=k({__name:"RegisterForm",props:{error:{},isLoading:{type:Boolean}},emits:["submit"],setup(_,{emit:u}){const p=u,o=C({firstName:"",lastName:"",email:"",username:"",password:"",passwordConfirmation:""});function d(){p("submit",o.value)}return(w,s)=>(f(),g("form",{class:"space-y-3",onSubmit:R(d,["prevent"])},[l("div",re,[t(e(v),{variant:"on"},{default:a(()=>[s[6]||(s[6]=l("label",{for:"first-name"},"First Name",-1)),t(e(c),{modelValue:o.value.firstName,"onUpdate:modelValue":s[0]||(s[0]=n=>o.value.firstName=n),id:"first-name",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[6]}),t(e(v),{variant:"on"},{default:a(()=>[s[7]||(s[7]=l("label",{for:"last-name"},"Last Name",-1)),t(e(c),{modelValue:o.value.lastName,"onUpdate:modelValue":s[1]||(s[1]=n=>o.value.lastName=n),id:"last-name",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[7]})]),l("div",ue,[t(e(v),{variant:"on"},{default:a(()=>[s[8]||(s[8]=l("label",{for:"email"},"Email",-1)),t(e(c),{modelValue:o.value.email,"onUpdate:modelValue":s[2]||(s[2]=n=>o.value.email=n),id:"email",type:"email",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[8]}),t(e(v),{variant:"on"},{default:a(()=>[s[9]||(s[9]=l("label",{for:"username"},"Username",-1)),t(e(c),{modelValue:o.value.username,"onUpdate:modelValue":s[3]||(s[3]=n=>o.value.username=n),id:"username",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[9]})]),l("div",de,[t(e(v),{variant:"on"},{default:a(()=>[s[10]||(s[10]=l("label",{for:"password"},"Password",-1)),t(e(c),{modelValue:o.value.password,"onUpdate:modelValue":s[4]||(s[4]=n=>o.value.password=n),id:"password",type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[10]}),t(e(v),{variant:"on"},{default:a(()=>[s[11]||(s[11]=l("label",{for:"confirm-password"},"Confirm Password",-1)),t(e(c),{modelValue:o.value.passwordConfirmation,"onUpdate:modelValue":s[5]||(s[5]=n=>o.value.passwordConfirmation=n),id:"confirm-password",type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[11]})]),t(e(h),{class:"mt-3 w-full",label:"Continue with email",severity:"primary",type:"submit",loading:w.isLoading},{icon:a(()=>[t(e(y),{icon:e(L)},null,8,["icon"])]),_:1},8,["loading"])],32))}});function ce(){return H({queryKey:["institutions"],queryFn:async()=>(await K.get(q.institutions.list)).data})}const pe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-3%200%20262%20262'%20xmlns='http://www.w3.org/2000/svg'%20preserveAspectRatio='xMidYMid'%3e%3cpath%20d='M255.878%20133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45%2012.04-9.283%2030.172-26.69%2042.356l-.244%201.622%2038.755%2030.023%202.685.268c24.659-22.774%2038.875-56.282%2038.875-96.027'%20fill='%234285F4'/%3e%3cpath%20d='M130.55%20261.1c35.248%200%2064.839-11.605%2086.453-31.622l-41.196-31.913c-11.024%207.688-25.82%2013.055-45.257%2013.055-34.523%200-63.824-22.773-74.269-54.25l-1.531.13-40.298%2031.187-.527%201.465C35.393%20231.798%2079.49%20261.1%20130.55%20261.1'%20fill='%2334A853'/%3e%3cpath%20d='M56.281%20156.37c-2.756-8.123-4.351-16.827-4.351-25.82%200-8.994%201.595-17.697%204.206-25.82l-.073-1.73L15.26%2071.312l-1.335.635C5.077%2089.644%200%20109.517%200%20130.55s5.077%2040.905%2013.925%2058.602l42.356-32.782'%20fill='%23FBBC05'/%3e%3cpath%20d='M130.55%2050.479c24.514%200%2041.05%2010.589%2050.479%2019.438l36.844-35.974C195.245%2012.91%20165.798%200%20130.55%200%2079.49%200%2035.393%2029.301%2013.925%2071.947l42.211%2032.783c10.59-31.477%2039.891-54.251%2074.414-54.251'%20fill='%23EB4335'/%3e%3c/svg%3e",ge="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='17'%20y='17'%20width='10'%20height='10'%20fill='%23FEBA08'/%3e%3crect%20x='5'%20y='17'%20width='10'%20height='10'%20fill='%2305A6F0'/%3e%3crect%20x='17'%20y='5'%20width='10'%20height='10'%20fill='%2380BC06'/%3e%3crect%20x='5'%20y='5'%20width='10'%20height='10'%20fill='%23F25325'/%3e%3c/svg%3e",fe=[{id:"google",name:"Google",logo:pe},{id:"microsoft",name:"Microsoft",logo:ge}],ve={class:"text-bold text-center text-4xl",ref:"title"},we={class:"flex items-center gap-2"},be=["alt","src"],xe={class:"flex flex-col"},ye={class:"text-sm font-bold"},he={class:"text-sm text-gray-400"},_e={key:0,class:"text-sm font-bold text-slate-600"},Ve=["href"],ke=["src","alt"],Ce={class:"absolute right-4 bottom-4"},Le={class:"text-lg font-bold"},Ue=k({__name:"AuthPage",setup(_){const{locale:u}=Q(),p=Y(),o=ee(),d=W(),{data:w,isLoading:s}=ce(),{mutate:n,isPending:A,error:N}=Z({onError:m=>{var i;p.add({severity:"error",summary:"Inloggen mislukt",detail:(i=m.response)==null?void 0:i.data})},onSuccess:()=>{d.query.redirect?o.push({path:d.query.redirect.toString()}):o.push({name:"locations"}),p.add({severity:"success",summary:"Ingelogd!",detail:"Je bent succesvol ingelogd."})}}),{mutate:G,isPending:M,error:E}=O({onError:m=>{var i;p.add({severity:"error",summary:"Registratie mislukt",detail:(i=m.response)==null?void 0:i.data})},onSuccess:()=>{p.add({severity:"success",summary:"Geregistreerd!",detail:"Je bent succesvol geregistreerd. Je kan nu inloggen."}),o.push({name:"auth",params:{action:"login"}})}}),V=C(""),j=$(()=>!!d.params.action),P=$(()=>w.value?w.value.filter(m=>{var I,U;const i=((I=m.slug[u.value])==null?void 0:I.toLowerCase().trim())||"",r=((U=m.name[u.value])==null?void 0:U.toLowerCase().trim())||"",F=V.value.toLowerCase();return i.includes(F)||r.includes(F)}):[]);function z(m){m.value}function T(){o.push({name:"auth"})}function S(){o.push({name:"auth",params:{action:"login"}})}function J(){o.push({name:"auth",params:{action:"register"}})}return(m,i)=>(f(),g(b,null,[l("h1",ve,i[1]||(i[1]=[l("span",{class:"text-gradient-conic font-bold"},"Blokmap Account",-1)]),512),i[4]||(i[4]=l("p",{class:"text-md mt-1 max-w-80 text-center text-slate-500"}," Gebruik je onderwijsinstelling of een ander type account om in te loggen. ",-1)),t(e(te),{class:"my-2"},{default:a(()=>[t(e(le),null,{default:a(()=>[t(e(y),{icon:e(X),class:"text-slate-500"},null,8,["icon"])]),_:1}),t(e(ae),{class:"!w-[300px] py-1 ps-6",placeholder:"Selecteer een instelling","pt:overlay:class":"!w-[300px] w-full","pt:list-container:class":"p-0",options:P.value,loading:e(s),onChange:z},{header:a(()=>[t(e(c),{modelValue:V.value,"onUpdate:modelValue":i[0]||(i[0]=r=>V.value=r),placeholder:"Zoek een instelling",class:"w-full border-0"},null,8,["modelValue"])]),option:a(({option:r})=>[l("div",we,[l("img",{alt:r.name,src:r.logo.url,class:"h-10 w-10 object-contain"},null,8,be),l("div",xe,[l("p",ye,x(r.slug[e(u)]),1),l("p",he,x(r.name[e(u)]),1)])])]),value:a(({value:r})=>[r?(f(),g("p",_e,x(r.name[e(u)]),1)):B("",!0)]),empty:a(()=>i[2]||(i[2]=[l("span",{class:"text-gray-500"}," Geen overeenkomsten gevonden. Geen zorgen, je kan nog steeds een account maken via de opties hieronder! ",-1)])),_:1},8,["options","loading"])]),_:1}),(f(!0),g(b,null,D(e(fe),r=>(f(),g("a",{key:r.name,href:"/api/"+e(q).auth.sso.replace("{provider}",r.id)},[t(e(h),{class:"w-[300px]",severity:"contrast",size:"small",label:`Log in met ${r.name}`},{icon:a(()=>[l("img",{src:r.logo,alt:r.name,class:"h-5 w-5 object-contain"},null,8,ke)]),_:2},1032,["label"])],8,Ve))),128)),l("div",Ce,[t(e(h),{severity:"secondary",size:"small",onClick:S,link:""},{default:a(()=>[i[3]||(i[3]=l("span",{class:"hover:underline"},"Inloggen met wachtwoord",-1)),t(e(y),{icon:e(L)},null,8,["icon"])]),_:1,__:[3]})]),t(e(oe),{class:"w-[500px]",visible:j.value,"onUpdate:visible":T,modal:""},{header:a(()=>[l("h2",Le,x(e(d).params.action==="register"?"Registreren":"Inloggen met wachtwoord"),1)]),default:a(()=>[e(d).params.action==="login"?(f(),g(b,{key:0},[t(ie,{"is-loading":e(A),error:e(N),onSubmit:e(n)},null,8,["is-loading","error","onSubmit"]),l("span",{class:"mt-4 block cursor-pointer text-center hover:underline",onClick:J}," Heb je nog geen account? ")],64)):e(d).params.action==="register"?(f(),g(b,{key:1},[t(me,{"is-loading":e(M),error:e(E),onSubmit:e(G)},null,8,["is-loading","error","onSubmit"]),l("span",{class:"mt-4 block cursor-pointer text-center hover:underline",onClick:S}," Heb je al een account? ")],64)):B("",!0)]),_:1},8,["visible"])],64))}});export{Ue as default};
