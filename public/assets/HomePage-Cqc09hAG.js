import{_ as y}from"./BlokMap.vue_vue_type_style_index_0_lang-BCLzLWjl.js";import{c as _,S as v,d as E,u as b,s as F,_ as S}from"./index-CFXWBode.js";import{u as W}from"./query-D-ajdwyw.js";import{E as k,U as I,P as N,a3 as q,Y as B,r as P,o as R,c as T,d as c,f,x as p,J as m,F as V,b as J}from"./vue-Cs7Q816V.js";import"./primevue-BDIMoyYs.js";function K(a){const o=k(()=>JSON.stringify(Object.entries(a.value).sort())),s=W({queryKey:["locations","search",o],queryFn:async()=>{const e=await _.get("/locations/search",{params:a.value});return v.array().parse(e.data)}});return{locations:s.data,locationsError:s.error,locationsIsLoading:s.isPending,locationsIsSuccess:s.isSuccess,locationsIsError:s.isError}}function u(a,o=4){return a==null?null:parseFloat(a.toFixed(o))}const g=E("locationFilters",()=>{const{locale:a}=b(),o=I({language:a.value,query:null});function s(e){o.value={...o.value,...e,northEastLat:u(e.northEastLat),northEastLng:u(e.northEastLng),southWestLat:u(e.southWestLat),southWestLng:u(e.southWestLng)}}return{filters:o,updateFilters:s}}),O={class:"flex flex-col gap-8 w-full xl:w-2/3 mx-auto mb-16"},U={class:"max-h-full h-[600px]"},M=N({__name:"HomePage",setup(a){const{updateFilters:o}=g(),{filters:s}=F(g()),e=q(s,500),{locations:h,locationsIsLoading:L}=K(e),r=B("blokmap"),i=P(null);function x(){var n;if((n=r.value)!=null&&n.map){const t=r.value.map.getBounds(),l=t.getNorthEast(),d=t.getSouthWest();o({northEastLat:l.lat,northEastLng:l.lng,southWestLat:d.lat,southWestLng:d.lng})}}return R(()=>{var n,t;(t=(n=r.value)==null?void 0:n.map)==null||t.on("moveend",x)}),(n,t)=>(J(),T(V,null,[t[1]||(t[1]=c("h1",{class:"text-center text-4xl font-extrabold my-16"},[f(" Find your perfect "),c("span",{class:"text-secondary"},"study spot"),f(" in Flanders ")],-1)),c("div",O,[p(S),c("div",U,[p(y,{locations:m(h),"is-loading":m(L),location:i.value,"onUpdate:location":t[0]||(t[0]=l=>i.value=l),ref_key:"blokmap",ref:r,rounded:""},null,8,["locations","is-loading","location"])])])],64))}});export{M as default};
