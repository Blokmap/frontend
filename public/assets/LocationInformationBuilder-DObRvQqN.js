import{x as D,h as x,y as R,a as z}from"./primevue-Ex1kWbwE.js";import{L as I}from"./LocationBuilderCard-DRy4lkq-.js";import{L as q}from"./LocationMap-BtvvC7Sr.js";import{F as y,q as U,ah as Y,ai as $,aj as Z,u as J,e as Q,ak as W,al as ee,U as te,z as ae,am as le,an as se,_ as oe}from"./index-BH2d3-5Q.js";import{L as F,l as N,Y as l,I as ne,p as r,f as S,d as f,y as n,h as ie,t as u,a6 as _,r as E,H as b,ag as A,w as de,c as C,e as a,q as M}from"./vue-Ch5H8NcK.js";import{L as V,f as re}from"./helpers-CQSRa6mq.js";import{d as ue}from"./useMapBox-hbhz103P.js";const B=F({__name:"Callout",props:{severity:{default:"info"},message:{},icon:{},showIcon:{type:Boolean,default:!0}},setup(c){const t={info:Z,warn:$,error:Y,success:U};return(h,T)=>(f(),N(l(D),{severity:c.severity},ne({default:r(()=>[S(h.$slots,"default",{},()=>[ie(u(c.message),1)])]),_:2},[c.showIcon?{name:"icon",fn:r(()=>[S(h.$slots,"icon",{},()=>[n(l(y),{class:"text-xl",icon:c.icon||t[c.severity]},null,8,["icon"])])]),key:"0"}:void 0]),1032,["severity"]))}}),ce={class:"space-y-8"},me={class:"flex w-full items-center justify-between"},ve={class:"flex items-center space-x-2"},pe=["src"],fe={class:"text-sm"},xe=["for"],ge={class:"mt-1 flex justify-between"},be={class:"text-gray-500"},ye={class:"border-t border-gray-200 pt-6"},he=["for"],ke={class:"mt-1 block text-gray-500"},we={class:"relative"},Ce={class:"absolute top-3 left-3 z-10 w-64"},Ve={class:"space-y-3 rounded-lg bg-white p-3 shadow-xs"},Le={class:"space-y-2"},_e={class:"flex overflow-hidden rounded-md bg-gray-50"},Ee={class:"flex overflow-hidden rounded-md bg-gray-50"},Ne={key:0,class:"flex items-center space-x-2 text-xs text-gray-600"},Te={key:1,class:"space-y-2"},je={class:"flex cursor-pointer items-center gap-2 text-xs"},ze={class:"flex items-center gap-2 text-xs"},Ie={key:4,class:"text-center"},Se={class:"font-mono text-[10px] text-gray-400"},Ae=F({__name:"LocationInformationBuilder",props:{modelValue:{required:!0},modelModifiers:{},complete:{type:Boolean,default:!1},completeModifiers:{},substeps:{default:[]},substepsModifiers:{}},emits:["update:modelValue","update:complete","update:substeps"],setup(c){const t=_(c,"modelValue"),h=_(c,"complete"),T=_(c,"substeps"),G=J(),{locale:P}=Q(),{mutateAsync:H,isPending:g}=W(),k=E(18),d=E(P.value),m=E(null),w=b({get(){const{longitude:s,latitude:e}=t.value;return s&&e?[s,e]:ue.center},set([s,e]){t.value.longitude=Number(s.toFixed(6)),t.value.latitude=Number(e.toFixed(6))}}),L=b(()=>!!(t.value.street&&t.value.number&&t.value.zip&&t.value.city)),v=b(()=>!!(t.value.latitude&&t.value.longitude)),j=b(()=>{if(!m.value||!v.value)return!1;const[s,e]=m.value,i=1e-5;return Math.abs(t.value.longitude-s)>i||Math.abs(t.value.latitude-e)>i}),K=b(()=>L.value?!v.value||!m.value:!1);A(()=>{const s=t.value,e=s.excerpt,i=s.description;h.value=!!(s.name&&e.nl&&i.nl&&s.street&&s.zip&&s.city&&v.value)}),A(()=>{const s=t.value,e=s.excerpt,i=s.description;T.value=[{label:"Naam en beschrijving",isCompleted:!!s.name&&!!e.nl&&!!i.nl},{label:"Locatie op kaart",isCompleted:!!s.street&&!!s.zip&&!!s.city&&!!v.value}]});async function O(){if(L.value)try{const s=re(t.value),e=await H(s);m.value=e,k.value=18,w.value=e}catch{G.add({severity:"error",summary:"Fout bij het ophalen van coördinaten",detail:"Er is iets misgegaan bij het ophalen van de locatie. Controleer het adres en probeer het opnieuw."})}}function X(){m.value&&(w.value=m.value,k.value=18)}return de(()=>[t.value.street,t.value.number,t.value.zip,t.value.city],()=>{m.value=null}),(s,e)=>(f(),C("div",ce,[n(I,{icon:l(te)},{header:r(()=>[a("div",me,[e[10]||(e[10]=a("div",null,[a("h3",{class:"text-xl font-semibold text-gray-900"},"Basis informatie"),a("p",{class:"text-sm text-gray-600"},"Voer de basisgegevens van uw locatie in")],-1)),a("div",ve,[n(ee,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=i=>d.value=i)},{button:r(({toggle:i,currentFlag:p,currentLabel:o})=>[n(l(z),{severity:"contrast",size:"small",onClick:i},{default:r(()=>[a("img",{src:p,alt:"flag",class:"mr-2 h-4 w-4"},null,8,pe),a("span",fe,u(o),1)]),_:2},1032,["onClick"])]),_:1},8,["modelValue"])])])]),default:r(()=>{var i,p;return[a("div",null,[e[11]||(e[11]=a("label",{for:"name",class:"mb-2 block text-sm font-medium text-gray-700"}," Locatie naam * ",-1)),n(l(x),{id:"name",modelValue:t.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.name=o),class:"w-full",placeholder:"De Krook"},null,8,["modelValue"]),e[12]||(e[12]=a("small",{class:"mt-1 block text-gray-500"}," Kies een herkenbare naam voor de locatie ",-1))]),a("div",null,[a("label",{for:`excerpt-${d.value}`,class:"mb-2 block text-sm font-medium text-gray-700"}," Korte omschrijving ("+u(d.value)+") ",9,xe),n(l(x),{id:`excerpt-${d.value}`,modelValue:t.value.excerpt[d.value],"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.excerpt[d.value]=o),class:"w-full",placeholder:"Stadsbibliotheek met zicht op het water",maxlength:l(V).MAX_EXCERPT_LENGTH},null,8,["id","modelValue","maxlength"]),a("div",ge,[e[13]||(e[13]=a("small",{class:"text-gray-500"}," Omschrijf de locatie in maximaal 6 beschrijvende woorden ",-1)),a("small",be,u((((i=t.value.excerpt)==null?void 0:i[d.value])||"").length)+"/"+u(l(V).MAX_EXCERPT_LENGTH)+" karakters ",1)])]),a("div",ye,[e[14]||(e[14]=a("h4",{class:"mb-4 text-lg font-medium text-gray-900"},"Uitgebreide beschrijving",-1)),a("div",null,[a("label",{for:`description-${d.value}`,class:"mb-2 block text-sm font-medium text-gray-700"}," Beschrijving ("+u(d.value)+") ",9,he),n(l(R),{id:`description-${d.value}`,modelValue:t.value.description[d.value],"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.description[d.value]=o),class:"w-full",maxlength:l(V).MAX_DESCRIPTION_LENGTH,rows:"5",placeholder:"De Krook is de stadsbibliotheek van Gent, de ideale plek om rustig te studeren tussen andere studenten, met zicht op de Leie."},null,8,["id","modelValue","maxlength"]),a("small",ke,u((((p=t.value.description)==null?void 0:p[d.value])||"").length)+"/"+u(l(V).MAX_DESCRIPTION_LENGTH)+" karakters ",1)])])]}),_:1},8,["icon"]),n(I,{icon:l(se)},{header:r(()=>[...e[15]||(e[15]=[a("h3",{class:"text-xl font-semibold text-gray-900"},"Adres informatie",-1),a("p",{class:"text-sm text-gray-600"}," Voer het adres van uw locatie in op de kaart. Sleep de kaart om de locatie marker precies te positioneren. ",-1)])]),default:r(()=>{var i,p;return[a("div",we,[n(q,{class:"aspect-video h-full w-full rounded-lg",ref:"map-container",center:w.value,"onUpdate:center":e[4]||(e[4]=o=>w.value=o),zoom:k.value,"onUpdate:zoom":e[5]||(e[5]=o=>k.value=o)},null,8,["center","zoom"]),a("div",Ce,[a("div",Ve,[e[21]||(e[21]=a("div",{class:"flex items-center justify-between"},[a("h4",{class:"text-sm font-medium text-gray-900"},"Adres")],-1)),a("div",Le,[a("div",_e,[n(l(x),{modelValue:t.value.street,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.street=o),placeholder:"Straat",class:"address-input",disabled:l(g)},null,8,["modelValue","disabled"]),n(l(x),{modelValue:t.value.number,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.number=o),placeholder:"Nr",class:"address-input",disabled:l(g)},null,8,["modelValue","disabled"])]),a("div",Ee,[n(l(x),{modelValue:t.value.zip,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.zip=o),placeholder:"Postcode",class:"address-input",disabled:l(g)},null,8,["modelValue","disabled"]),n(l(x),{modelValue:t.value.city,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.city=o),placeholder:"Stad",class:"address-input",disabled:l(g)},null,8,["modelValue","disabled"])])]),l(g)?(f(),C("div",Ne,[n(l(y),{icon:l(ae),spin:"",class:"h-3 w-3"},null,8,["icon"]),e[16]||(e[16]=a("span",null,"Coördinaten berekenen...",-1))])):K.value?(f(),C("div",Te,[n(l(z),{size:"small",class:"w-full",onClick:O,disabled:!L.value},{default:r(()=>[n(l(y),{icon:l($),class:"mr-2 h-3 w-3"},null,8,["icon"]),e[17]||(e[17]=a("span",null,"Bereken coördinaten",-1))]),_:1},8,["disabled"]),e[18]||(e[18]=a("p",{class:"text-xs text-gray-500"}," Klik om de locatie op de kaart te tonen ",-1))])):v.value&&j.value?(f(),N(B,{key:2,"show-icon":!1,onClick:X},{default:r(()=>[a("div",je,[e[19]||(e[19]=a("span",null," Locatie werd verfijnd op de kaart. Klik hier om te resetten. ",-1)),n(l(y),{icon:l(le)},null,8,["icon"])])]),_:1})):v.value&&!j.value?(f(),N(B,{key:3,"show-icon":!1},{default:r(()=>[a("div",ze,[e[20]||(e[20]=a("span",null," Sleep de marker om de positie te verfijnen. ",-1)),n(l(y),{icon:l(U)},null,8,["icon"])])]),_:1})):M("",!0),v.value?(f(),C("div",Ie,[a("p",Se,u((i=t.value.latitude)==null?void 0:i.toFixed(6))+", "+u((p=t.value.longitude)==null?void 0:p.toFixed(6)),1)])):M("",!0)])])])]}),_:1},8,["icon"])]))}}),He=oe(Ae,[["__scopeId","data-v-5973c423"]]);export{He as L};
