import{R as g,b as A}from"./types-BOX-2tRT.js";import{k as L,_ as W,F as h,n as N,b as B,v as O,l as F,w as M,s as V,x as Y}from"./index-7bbMbo5P.js";import{M as I,c as u,b as d,p as m,N as a,F as T,d as s,t as c,I as x,x as p,l as S,k as j,a4 as U}from"./vue-Sv2pE2s2.js";import{i as E,d as R,c as H,s as q,a as z,e as G,u as J,C as K,b as Q}from"./useVimControls-BxTp1mH9.js";import{f as X}from"./helpers-f-m2Bt7b.js";import{a as Z}from"./primevue-Dphh8M7u.js";function ee(i,n,o){return i.filter(t=>{const r=new Date(t.startTime);return E(r,n,o)})}function te(i){const n=new Date(i.startTime),o=new Date(i.endTime),t=R(n),r=R(o),k=H(n,o);return{id:`reservation-${i.id}`,day:q(n),startTime:t,endTime:r,duration:k,metadata:i}}function se(i,n,o){if(!i)return[];let t=i;return n&&o&&(t=ee(i,n,o)),t.map(te)}const ae={class:"flex items-center gap-2"},ne={class:"status-text text-primary-500"},oe={class:"status-text text-red-500"},ie={class:"status-text text-gray-500"},re={class:"status-text text-secondary-500"},ce=I({__name:"ReservationStateLabel",props:{state:{}},setup(i){const{t:n}=L();return(o,t)=>(d(),u("div",ae,[o.state===a(g).Present?(d(),u(T,{key:0},[t[0]||(t[0]=s("div",{class:"status-dot bg-primary-500"},null,-1)),s("span",ne,c(a(n)("app.status.present")),1)],64)):m("",!0),o.state===a(g).Absent?(d(),u(T,{key:1},[t[1]||(t[1]=s("div",{class:"status-dot bg-red-500"},null,-1)),s("span",oe,c(a(n)("app.status.absent")),1)],64)):m("",!0),o.state===a(g).Cancelled?(d(),u(T,{key:2},[t[2]||(t[2]=s("div",{class:"status-dot bg-gray-500"},null,-1)),s("span",ie,c(a(n)("app.status.cancelled")),1)],64)):m("",!0),o.state===a(g).Created?(d(),u(T,{key:3},[t[3]||(t[3]=s("div",{class:"status-dot bg-secondary-500"},null,-1)),s("span",re,c(a(n)("app.status.created")),1)],64)):m("",!0)]))}}),le=W(ce,[["__scopeId","data-v-98d78fa5"]]),de={class:"flex h-full flex-col space-y-6"},ue={class:"flex-1 overflow-hidden"},pe={key:0,class:"reservation-card"},fe={class:"mb-3 flex items-center justify-between"},me={class:"time-display"},ke={class:"time-text"},ve={class:"space-y-3"},_e={class:"text-sm font-semibold text-gray-900"},ye={class:"text-xs"},ge={class:"space-y-1 text-xs text-gray-800"},xe={class:"capacity-item"},we={class:"capacity-item"},Te=I({__name:"ReservationCalendar",props:{dateInWeek:{},reservations:{}},emits:["update:dateInWeek"],setup(i,{emit:n}){const o=i,t=n,r=x(()=>z(o.dateInWeek)),k=x(()=>G(o.dateInWeek)),D=x(()=>se(o.reservations,r.value,k.value));J({previousWeek:{keys:["j","ArrowLeft"],callback:v},nextWeek:{keys:["k","ArrowRight"],callback:_},goToToday:{keys:["t","Home"],callback:w}});function v(){const e=new Date(r.value);e.setDate(e.getDate()-7),t("update:dateInWeek",e)}function _(){const e=new Date(r.value);e.setDate(e.getDate()+7),t("update:dateInWeek",e)}function w(){t("update:dateInWeek",new Date)}function f(e){e&&e instanceof Date&&t("update:dateInWeek",e)}return(e,y)=>(d(),u("div",de,[p(K,{"current-week":e.dateInWeek,"onClick:previousWeek":v,"onClick:nextWeek":_,"onClick:currentWeek":w,"onSelect:date":f},null,8,["current-week"]),s("div",ue,[p(Q,{"current-week":e.dateInWeek,"time-slots":D.value,"on-previous-week":v,"on-next-week":_,class:"h-full"},{"time-slot":S(({slot:{metadata:l,startTime:P,endTime:$,duration:C}})=>{var b;return[l!=null&&l.location?(d(),u("div",pe,[s("div",fe,[l.state!==a(g).Created?(d(),j(le,{key:0,state:l.state},null,8,["state"])):m("",!0),s("div",me,[p(a(h),{icon:a(N),class:"time-icon"},null,8,["icon"]),s("span",ke,c(P)+"-"+c($),1)])]),s("div",ve,[s("h4",_e,c(l.location.name),1),s("div",ye,c(a(X)(l.location)),1),s("div",ge,[s("div",xe,[p(a(h),{icon:a(B),class:"capacity-icon"},null,8,["icon"]),s("span",null,c(((b=l.openingTime)==null?void 0:b.seatCount)??l.location.seatCount)+" plaatsen ",1)]),s("div",we,[p(a(h),{icon:a(O),class:"capacity-icon"},null,8,["icon"]),s("span",null,c(C.hours)+"u "+c(C.minutes)+"m studeren ",1)])])])])):m("",!0)]}),_:1},8,["current-week","time-slots"])])]))}}),he=W(Te,[["__scopeId","data-v-2d967dcb"]]),De={class:"space-y-6"},We={class:"flex w-full items-center gap-4 py-3"},Ie=I({__name:"ReservationsPage",setup(i){const n=V(),o=M(),{profileId:t}=F();x(()=>k.value||D.value);const r=x(()=>{var y;const f=(y=o.params.inWeekOf)==null?void 0:y.toString(),e=new Date(f);return isNaN(e.getTime())?new Date:e}),{isLoading:k,isPending:D,data:v}=A(t,r);function _(f){const e=U(f,"YYYY-MM-DD");n.push({name:"profile.reservations",params:{inWeekOf:e}})}function w(){n.push({name:"profile"})}return(f,e)=>(d(),u("div",De,[s("div",We,[p(a(Z),{onClick:w,severity:"secondary",text:"",rounded:""},{icon:S(()=>[p(a(h),{icon:a(Y)},null,8,["icon"])]),_:1}),e[1]||(e[1]=s("h1",{class:"absolute left-1/2 -translate-x-1/2 transform text-3xl font-bold text-gray-900"}," Mijn Reservaties ",-1))]),p(he,{"date-in-week":r.value,"onUpdate:dateInWeek":[e[0]||(e[0]=y=>r.value=y),_],reservations:a(v)},null,8,["date-in-week","reservations"])]))}}),Ae=W(Ie,[["__scopeId","data-v-65d90422"]]);export{Ae as default};
