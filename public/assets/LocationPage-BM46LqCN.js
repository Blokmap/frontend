import{e as O,a as B,d as Se,g as Re,b as Ie,m as oe}from"./primevue-Ex1kWbwE.js";import{E as z,w as ge,F as M,G as Le,H as Ee,I as ne,p as Oe,J as De,_ as ee,t as J,K as je,c as re,L as Pe,M as qe,u as Me,k as fe,v as he,m as le,N as Be,e as We,O as Ae,Q as Ne,S as Fe,T as de,U as Ve,A as ce,V as ze}from"./index-BH2d3-5Q.js";import{a as Ue,f as Ge,b as Je}from"./helpers-CQSRa6mq.js";import{L as N,H as T,c as a,e as t,y as o,Y as e,t as v,h as D,d as s,F as I,A as Q,s as Z,p as b,q as y,l as w,J as ue,af as He,r as V,w as se,a0 as ye,a7 as Ke,a6 as me,a5 as Qe,o as Ye,D as Xe,n as Ze,i as et,Q as pe}from"./vue-Ch5H8NcK.js";import{L as tt}from"./LocationMap-BtvvC7Sr.js";import{O as st}from"./OpeningsTable-iQ443pCv.js";import{t as te,C as it,u as _e,a as ke,_ as ve}from"./useOpeningTimes-ClUtctVC.js";import{c as at}from"./useProfile-CIG-owsL.js";import{u as ot,a as nt}from"./useReservations-BsYyUm_C.js";import{u as rt}from"./useRouteDate-DMrgQeUU.js";import"@primeuix/styled";import"@primeuix/utils";import"@primeuix/utils/object";import"@primeuix/styles/base";import"@primeuix/utils/dom";import"@primeuix/utils/zindex";import"@primeuix/styles/toast";import"@primeuix/styles/accordion";import"@primeuix/utils/uuid";import"@primeuix/styles/chip";import"@primeuix/styles/autocomplete";import"@primeuix/styles/avatar";import"@primeuix/styles/blockui";import"@primeuix/styles/breadcrumb";import"@primeuix/styles/buttongroup";import"@primeuix/styles/datepicker";import"@primeuix/styles/card";import"@primeuix/styles/carousel";import"@primeuix/styles/cascadeselect";import"@primeuix/styles/checkbox";import"@primeuix/styles/checkboxgroup";import"@primeuix/styles/inputchips";import"@primeuix/styles/colorpicker";import"@primeuix/utils/eventbus";import"@primeuix/styles/dialog";import"@primeuix/styles/confirmdialog";import"@primeuix/styles/confirmpopup";import"@primeuix/styles/contextmenu";import"@primeuix/styles/paginator";import"@primeuix/styles/iconfield";import"@primeuix/styles/inputtext";import"@primeuix/styles/virtualscroller";import"@primeuix/styles/select";import"@primeuix/styles/inputnumber";import"@primeuix/styles/datatable";import"@primeuix/styles/radiobutton";import"@primeuix/styles/dataview";import"@primeuix/styles/divider";import"@primeuix/styles/dock";import"@primeuix/styles/tooltip";import"@primeuix/styles/drawer";import"@primeuix/styles/fieldset";import"@primeuix/styles/badge";import"@primeuix/styles/button";import"@primeuix/styles/message";import"@primeuix/styles/progressbar";import"@primeuix/styles/fileupload";import"@primeuix/styles/floatlabel";import"@primeuix/styles/galleria";import"@primeuix/styles/iftalabel";import"@primeuix/styles/image";import"@primeuix/styles/imagecompare";import"@primeuix/styles/inlinemessage";import"@primeuix/styles/inplace";import"@primeuix/styles/inputgroup";import"@primeuix/styles/inputotp";import"@primeuix/styles/toggleswitch";import"@primeuix/styles/knob";import"@primeuix/styles/listbox";import"@primeuix/styles/megamenu";import"@primeuix/styles/menu";import"@primeuix/styles/menubar";import"@primeuix/styles/metergroup";import"@primeuix/styles/multiselect";import"@primeuix/styles/orderlist";import"@primeuix/styles/organizationchart";import"@primeuix/styles/overlaybadge";import"@primeuix/styles/popover";import"@primeuix/styles/panel";import"@primeuix/styles/panelmenu";import"@primeuix/styles/password";import"@primeuix/styles/picklist";import"@primeuix/styles/progressspinner";import"@primeuix/styles/radiobuttongroup";import"@primeuix/styles/rating";import"@primeuix/styles/scrollpanel";import"@primeuix/styles/scrolltop";import"@primeuix/styles/togglebutton";import"@primeuix/styles/selectbutton";import"@primeuix/styles/skeleton";import"@primeuix/styles/slider";import"@primeuix/styles/speeddial";import"@primeuix/styles/tieredmenu";import"@primeuix/styles/splitbutton";import"@primeuix/styles/splitter";import"@primeuix/styles/stepper";import"@primeuix/styles/steps";import"@primeuix/styles/ripple";import"@primeuix/styles/tabmenu";import"@primeuix/styles/tabs";import"@primeuix/styles/tabview";import"@primeuix/styles/tag";import"@primeuix/styles/terminal";import"@primeuix/styles/textarea";import"@primeuix/styles/timeline";import"@primeuix/styles/toolbar";import"@primeuix/styles/tree";import"@primeuix/styles/treeselect";import"@primeuix/styles/treetable";import"./useMapBox-hbhz103P.js";import"./mapbox-CzQPf59M.js";import"./index-DyskoCvK.js";function lt(d,n,i,m){const p=z(d),k=z(n),C=z(i),L=z(m);return p<L&&C<k}const dt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2092.42%20132.43'%3e%3cpath%20fill='%231a73e8'%20d='M60.2%202.2C55.8.8%2051%200%2046.1%200%2032%200%2019.3%206.4%2010.8%2016.5l21.8%2018.3L60.2%202.2z'/%3e%3cpath%20fill='%23ea4335'%20d='M10.8%2016.5C4.1%2024.5%200%2034.9%200%2046.1c0%208.7%201.7%2015.7%204.6%2022l28-33.3-21.8-18.3z'/%3e%3cpath%20fill='%234285f4'%20d='M46.2%2028.5c9.8%200%2017.7%207.9%2017.7%2017.7%200%204.3-1.6%208.3-4.2%2011.4%200%200%2013.9-16.6%2027.5-32.7-5.6-10.8-15.3-19-27-22.7L32.6%2034.8c3.3-3.8%208.1-6.3%2013.6-6.3'/%3e%3cpath%20fill='%23fbbc04'%20d='M46.2%2063.8c-9.8%200-17.7-7.9-17.7-17.7%200-4.3%201.5-8.3%204.1-11.3l-28%2033.3c4.8%2010.6%2012.8%2019.2%2021%2029.9l34.1-40.5c-3.3%203.9-8.1%206.3-13.5%206.3'/%3e%3cpath%20fill='%2334a853'%20d='M59.1%20109.2c15.4-24.1%2033.3-35%2033.3-63%200-7.7-1.9-14.9-5.2-21.3L25.6%2098c2.6%203.4%205.3%207.3%207.9%2011.3%209.4%2014.5%206.8%2023.1%2012.8%2023.1s3.4-8.7%2012.8-23.2'/%3e%3c/svg%3e",ct={class:"rounded-xl border border-slate-200 bg-white p-6"},ut={class:"flex items-center gap-3"},mt={class:"bg-primary-100 flex h-10 w-10 items-center justify-center rounded-lg"},pt={class:"flex-1"},vt={class:"text-gray-600"},gt=["href"],ft=["src"],ht=N({__name:"LocationAddressCard",props:{location:{}},setup(d){const n=d,i=T(()=>Ue(n.location));return(m,p)=>(s(),a("div",ct,[t("div",ut,[t("div",mt,[o(e(M),{icon:e(ge),class:"text-primary-600 h-5 w-5"},null,8,["icon"])]),t("div",pt,[p[0]||(p[0]=t("h3",{class:"font-semibold text-gray-900"},"Adres",-1)),t("p",vt,v(e(Ge)(d.location)),1)]),t("a",{href:i.value,class:"flex items-center gap-1",target:"_blank",rel:"noopener"},[t("img",{src:e(dt),alt:"Google Maps Logo",class:"h-5 w-5"},null,8,ft),p[1]||(p[1]=D(" Open in Google Maps ",-1))],8,gt)])]))}}),yt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},_t={class:"flex-shrink-0"},kt={class:"min-w-0 flex-1"},xt={class:"font-medium text-gray-900"},bt={class:"mt-1 text-sm text-gray-600"},$t=N({__name:"LocationFeatures",props:{location:{}},setup(d){const n=d,i=T(()=>Je(n.location)),m=T(()=>{const p=[];return i.value.openInMorning&&p.push({icon:Le,title:"Open in de ochtend",description:"Ideaal voor vroege vogels",iconColor:"text-amber-500"}),i.value.openInEvening&&p.push({icon:Ee,title:"Open in de avond",description:"Perfect voor nachtbrakers",iconColor:"text-slate-600"}),i.value.openInWeekend&&p.push({icon:ne,title:"Weekend uren",description:"Beschikbaar in het weekend",iconColor:"text-emerald-500"}),i.value.openAtNight&&p.push({icon:Oe,title:"Verlengde uren",description:"Open tot laat in de avond",iconColor:"text-primary-600"}),n.location.isReservable&&p.push({icon:ne,title:"Reservaties mogelijk",description:"Reserveer je plek van tevoren",iconColor:"text-primary-500"}),n.location.seatCount&&n.location.seatCount>0&&p.push({icon:De,title:`${n.location.seatCount} zitplaatsen`,description:"Beschikbare zitcapaciteit",iconColor:"text-primary-600"}),p});return(p,k)=>(s(),a("div",yt,[(s(!0),a(I,null,Q(m.value,C=>(s(),a("div",{key:C.title,class:"feature"},[t("div",_t,[o(e(M),{icon:C.icon,class:Z(["h-5 w-5",C.iconColor])},null,8,["icon","class"])]),t("div",kt,[t("h4",xt,v(C.title),1),t("p",bt,v(C.description),1)])]))),128))]))}}),wt=ee($t,[["__scopeId","data-v-e6137ea2"]]),Tt={class:"h-full w-full rounded-lg border-1 border-slate-200"},Ct=N({__name:"LocationMapSkeleton",setup(d){return(n,i)=>(s(),a("div",Tt,[o(e(O),{class:"rounded-lg",height:"100%",width:"100%"})]))}}),St={class:"space-y-4 rounded-lg border border-slate-200 p-4"},Rt={class:"flex items-center gap-2"},It={class:"space-y-3"},Lt=N({__name:"OpeningsTableSkeleton",setup(d){return(n,i)=>(s(),a("div",St,[t("div",Rt,[o(e(O),{width:"20px",height:"20px"}),o(e(O),{width:"120px",height:"24px"})]),t("div",It,[(s(),a(I,null,Q(7,m=>t("div",{key:m,class:"flex items-center justify-between"},[o(e(O),{width:"80px",height:"20px"}),o(e(O),{width:"100px",height:"20px"})])),64))])]))}});function Et(d){var n;return((n=d.metadata)==null?void 0:n.type)==="opening"}function Ot(d){var n;return((n=d.metadata)==null?void 0:n.type)==="reservation"}function Dt(d){var n;return((n=d.metadata)==null?void 0:n.type)==="request"}const jt={class:"rounded-lg border border-gray-200"},Pt=["onClick"],qt={class:"time-display"},Mt={class:"time-text"},Bt={class:"time-display"},Wt={class:"time-text"},At={key:2,class:"reservation-request-card"},Nt={class:"time-display"},Ft={class:"time-text"},Vt=N({__name:"ReservationBuilderCalendar",props:{currentWeek:{},openingTimes:{},reservations:{},reservationsToDelete:{},reservationsToCreate:{},isSaving:{type:Boolean}},emits:["click:opening","delete:request","delete:reservation"],setup(d,{emit:n}){const i=d,m=n,p=T(()=>i.openingTimes?te(i.openingTimes).map(h=>{const c={type:"opening",data:h.metadata};return{...h,metadata:c}}):[]),k=T(()=>i.reservations?te(i.reservations).map(h=>{const c={type:"reservation",data:h.metadata};return{...h,metadata:c}}):[]),C=T(()=>i.reservationsToCreate?te(i.reservationsToCreate).map(h=>{const c={type:"request",data:h.metadata};return{...h,metadata:c}}):[]),L=T(()=>[...p.value,...k.value,...C.value]);function r(f){return i.reservationsToDelete.some(h=>h.id===f.id)}function S(f,h){if(i.isSaving||!f.metadata)return;const c={...f,metadata:f.metadata.data};m("click:opening",c,h)}function g(f){i.isSaving||m("delete:request",f)}function x(f){i.isSaving||m("delete:reservation",f)}return(f,h)=>(s(),a("div",jt,[o(it,{class:"h-full","current-week":d.currentWeek,"time-slots":L.value,"enable-dragging":!1},{"time-slot":b(({slot:c})=>[e(Et)(c)?(s(),a("div",{key:0,class:"opening-time-card",onClick:j=>S(c,j)},[t("div",qt,[t("span",Mt,v(e(J)(c.startTime))+"-"+v(e(J)(c.endTime)),1)])],8,Pt)):e(Ot)(c)?(s(),a("div",{key:1,class:Z(["reservation-card",{deleted:r(c.metadata.data)}])},[r(c.metadata.data)?y("",!0):(s(),w(e(M),{key:0,icon:e(je)[c.metadata.data.state],class:"state-icon",spin:c.metadata.data.state==="pending"},null,8,["icon","spin"])),o(e(B),{rounded:"",class:"delete-btn",size:"small",severity:"contrast",disabled:d.isSaving,onClick:ue(j=>x(c.metadata.data),["stop"]),text:""},{icon:b(()=>[o(e(M),{icon:e(re),class:"h-3 w-3"},null,8,["icon"])]),_:1},8,["disabled","onClick"]),r(c.metadata.data)?(s(),w(e(M),{key:1,icon:e(Pe),class:"delete-cross"},null,8,["icon"])):y("",!0),t("div",Bt,[t("span",Wt,v(e(J)(c.startTime))+"-"+v(e(J)(c.endTime)),1)])],2)):e(Dt)(c)?(s(),a("div",At,[o(e(B),{rounded:"",class:"delete-btn",size:"small",severity:"contrast",disabled:d.isSaving,onClick:ue(j=>g(c.metadata.data),["stop"]),text:""},{icon:b(()=>[o(e(M),{icon:e(re),class:"h-3 w-3"},null,8,["icon"])]),_:1},8,["disabled","onClick"]),t("div",Nt,[t("span",Ft,v(e(J)(c.startTime))+"-"+v(e(J)(c.endTime)),1)])])):y("",!0)]),_:1},8,["current-week","time-slots"])]))}}),zt=ee(Vt,[["__scopeId","data-v-02bc19fa"]]),Ut={class:"flex items-center gap-6"},Gt={key:0,class:"legend-item"},Jt={key:1,class:"legend-item"},Ht=N({__name:"ReservationBuilderLegend",props:{hasAdditions:{type:Boolean},hasDeletions:{type:Boolean}},setup(d){return(n,i)=>(s(),a("div",Ut,[i[2]||(i[2]=He('<div class="legend-item" data-v-81d68cf9><div class="legend-box bg-slate-100" data-v-81d68cf9></div><span class="legend-label" data-v-81d68cf9>Beschikbaar</span></div><div class="legend-item" data-v-81d68cf9><div class="legend-box border-secondary-500 bg-secondary-100 border-l-3" data-v-81d68cf9></div><span class="legend-label" data-v-81d68cf9>Jouw reservatie</span></div>',2)),d.hasAdditions?(s(),a("div",Gt,[...i[0]||(i[0]=[t("div",{class:"legend-box border-secondary-400 bg-secondary-100 border-l-3 border-dashed"},null,-1),t("span",{class:"legend-label"},"Nieuw",-1)])])):y("",!0),d.hasDeletions?(s(),a("div",Jt,[...i[1]||(i[1]=[t("div",{class:"legend-box border-l-3 border-red-700 bg-red-100"},null,-1),t("span",{class:"legend-label"},"Verwijderd",-1)])])):y("",!0)]))}}),Kt=ee(Ht,[["__scopeId","data-v-81d68cf9"]]);function Qt(d,n){const i=V(null),m=V(!1);function p(L){i.value&&k();const S=`wss://${window.location.host}${qe}`;i.value=new WebSocket(S),i.value.onopen=()=>{if(m.value=!0,i.value&&i.value.readyState===WebSocket.OPEN){const g=JSON.stringify(L);i.value.send(g)}},i.value.onmessage=g=>{try{const x=JSON.parse(g.data);n&&n(x)}catch(x){console.error("[WebSocket] Failed to parse message:",x)}},i.value.onerror=g=>{console.error("[WebSocket] Error:",g)},i.value.onclose=()=>{m.value=!1}}function k(){i.value&&(i.value.close(),i.value=null,m.value=!1)}function C(L){return i.value&&i.value.readyState===WebSocket.OPEN?(i.value.send(JSON.stringify(L)),!0):!1}return se(()=>e(d),L=>{L?p(L):k()},{immediate:!0,deep:!0}),ye(k),{ws:i,isConnected:m,send:C,disconnect:k}}const Yt={class:"space-y-6"},Xt={key:0,class:"flex items-center justify-center py-12"},Zt={class:"flex items-center gap-2 rounded-lg bg-gray-50 px-3 py-1.5 text-sm"},es={key:0,class:"flex items-center gap-1"},ts={class:"font-semibold text-green-700"},ss={key:1,class:"flex items-center gap-1"},is={class:"font-semibold text-red-700"},as={class:"w-80 space-y-4 p-4"},os={class:"space-y-3"},ns={class:"flex justify-end gap-2"},rs=N({__name:"ReservationBuilderDialog",props:Ke({location:{}},{visible:{type:Boolean,required:!0},visibleModifiers:{},date:{required:!0},dateModifiers:{}}),emits:["update:visible","update:date"],setup(d){const n=d,i=me(d,"visible"),m=me(d,"date"),p=he(),k=Me(),{profileId:C}=fe(),L=T(()=>{const u=C.value;return u?{profileId:u,tag:"reservations"}:null});Qt(L,u=>{u.state==="error"&&k.add({severity:"error",summary:"Fout bij verwerken reservatie",detail:`Er is een fout opgetreden bij het verwerken van je reservatie (ID: ${u.reservationId}).`})});const r=T(()=>({inWeekOf:m.value,locationId:n.location.id})),S=T(()=>({inWeekOf:m.value})),{data:g,isPending:x,refetch:f}=at(C,r),{data:h,isPending:c}=_e(T(()=>n.location.id),S),{mutateAsync:j}=ot(),{mutateAsync:$}=nt(),_=V([]),E=V([]),U=Qe("reservationPopover"),P=V(null),A=V(null),q=V(!1),Y=T(()=>x.value||c.value),F=T(()=>_.value.length+E.value.length>0);function xe(u,l){var R;q.value||!u.metadata||(A.value=u,P.value={day:u.metadata.day,openingTimeId:u.metadata.id,startTime:u.startTime,endTime:u.endTime},(R=U.value)==null||R.toggle(l))}function be(u){if(q.value)return;const l=_.value.findIndex(R=>R===u);l!==-1&&_.value.splice(l,1)}function $e(){var ie;if(!P.value)return;const u={...P.value},l=z(u.startTime),R=z(u.endTime),G=[...g.value||[],..._.value].filter(W=>{const H=W.day===u.day,X=lt(u.startTime,u.endTime,W.startTime,W.endTime);return H&&X}).map(W=>({start:z(W.startTime),end:z(W.endTime)}));if(G.length){let W=l,H=R;const X=G.find(K=>W>=K.start&&W<K.end);X&&(W=X.end);const ae=G.find(K=>K.start>=W&&K.start<H);ae&&(H=ae.start),u.startTime=le(W),u.endTime=le(H)}_.value.push(u),(ie=U.value)==null||ie.hide(),P.value=null}function we(u){if(q.value)return;const l=E.value.findIndex(R=>R.id===u.id);l!==-1?E.value.splice(l,1):E.value.push(u)}async function Te(){if(!(!F.value||q.value)){q.value=!0;try{const u=[];_.value.length>0&&u.push(j({locationId:n.location.id,requests:_.value})),E.value.length>0&&u.push($({locationId:n.location.id,reservationIds:E.value.map(l=>l.id)})),await Promise.all(u),await f(),_.value=[],E.value=[],k.add({severity:"success",summary:"Wijzigingen opgeslagen",detail:"Wijziging(en) succesvol opgeslagen."})}catch{k.add({severity:"error",summary:"Fout bij opslaan",detail:"Er is een fout opgetreden bij het opslaan van je wijzigingen."})}finally{q.value=!1}}}function Ce(){q.value||(_.value=[],E.value=[])}return se(i,u=>{u||p.push({name:"locations.detail",params:{locationId:n.location.id}})}),(u,l)=>(s(),a(I,null,[o(e(Re),{visible:i.value,"onUpdate:visible":l[2]||(l[2]=R=>i.value=R),modal:"",closable:!1,class:"dialog"},{header:b(()=>[o(ke,{class:"w-full",date:m.value,"onUpdate:date":l[0]||(l[0]=R=>m.value=R)},null,8,["date"])]),footer:b(()=>[o(Kt,{class:"mr-auto","has-additions":_.value.length>0,"has-deletions":E.value.length>0},null,8,["has-additions","has-deletions"]),F.value?(s(),a(I,{key:0},[t("div",Zt,[_.value.length>0?(s(),a("span",es,[t("span",ts," +"+v(_.value.length),1)])):y("",!0),E.value.length>0?(s(),a("span",ss,[t("span",is," -"+v(E.value.length),1)])):y("",!0)]),o(e(B),{severity:"contrast",text:"",disabled:q.value,onClick:Ce},{default:b(()=>[...l[6]||(l[6]=[D(" Annuleren ",-1)])]),_:1},8,["disabled"]),o(e(B),{loading:q.value,onClick:Te},{default:b(()=>[...l[7]||(l[7]=[D(" Opslaan ",-1)])]),_:1},8,["loading"])],64)):(s(),w(e(B),{key:1,severity:"contrast",text:"",onClick:l[1]||(l[1]=R=>i.value=!1)},{default:b(()=>[...l[8]||(l[8]=[D("Sluiten",-1)])]),_:1}))]),default:b(()=>[t("div",Yt,[Y.value?(s(),a("div",Xt,[o(e(Se))])):e(h)&&e(g)?(s(),w(zt,{key:1,"current-week":m.value,"opening-times":e(h),reservations:e(g),"reservations-to-create":_.value,"reservations-to-delete":E.value,"is-saving":q.value,"onClick:opening":xe,"onDelete:request":be,"onDelete:reservation":we},null,8,["current-week","opening-times","reservations","reservations-to-create","reservations-to-delete","is-saving"])):y("",!0)])]),_:1},8,["visible"]),o(e(Ie),{ref_key:"reservationPopover",ref:U},{default:b(()=>[t("div",as,[l[13]||(l[13]=t("h3",{class:"text-base font-semibold text-gray-900"},"Nieuwe reservatie",-1)),t("div",os,[t("div",null,[l[9]||(l[9]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Starttijd",-1)),P.value&&A.value?(s(),w(ve,{key:0,modelValue:P.value.startTime,"onUpdate:modelValue":l[3]||(l[3]=R=>P.value.startTime=R),"min-time":A.value.startTime,"max-time":A.value.endTime},null,8,["modelValue","min-time","max-time"])):y("",!0)]),t("div",null,[l[10]||(l[10]=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Eindtijd",-1)),P.value&&A.value?(s(),w(ve,{key:0,modelValue:P.value.endTime,"onUpdate:modelValue":l[4]||(l[4]=R=>P.value.endTime=R),"min-time":A.value.startTime,"max-time":A.value.endTime},null,8,["modelValue","min-time","max-time"])):y("",!0)])]),t("div",ns,[o(e(B),{severity:"contrast",text:"",size:"small",onClick:l[5]||(l[5]=R=>{var G;return(G=U.value)==null?void 0:G.hide()})},{default:b(()=>[...l[11]||(l[11]=[D(" Annuleren ",-1)])]),_:1}),o(e(B),{size:"small",onClick:$e},{default:b(()=>[...l[12]||(l[12]=[D("Toevoegen",-1)])]),_:1})])])]),_:1},512)],64))}}),ls=["onClick"],ds=["src"],cs={key:1,class:"gallery grid-cols-1 grid-rows-1"},us={class:"gallery-image-container"},ms=["src"],ps={key:0,class:"gallery-fullscreen"},vs={class:"flex items-center justify-between p-4"},gs={class:"gallery-grid-container"},fs={class:"gallery-grid"},hs=["id"],ys=["src","alt"],_s=N({__name:"Gallery",props:{images:{},placeholder:{}},setup(d){const n=d,i=V(!1),m=V(0),p=T(()=>[...n.images].sort((g,x)=>g.index-x.index)),k=T(()=>{const g=n.images.length;return g<=1?"grid-cols-1 grid-rows-1":g===2?"grid-cols-2 grid-rows-1":"grid-cols-4 grid-rows-2"}),C=T(()=>{const g=n.images.length;if(g<=2)return n.images.map((c,j)=>({image:c,index:j,classes:"gallery-image-container"}));const x=[],f=p.value[0],h=p.value.slice(1);return x.push({image:f,index:0,classes:"col-span-2 row-span-2"}),g===3?h.forEach((c,j)=>{x.push({image:c,index:j+1,classes:"col-span-2"})}):(h.slice(0,2).forEach((c,j)=>{x.push({image:c,index:j+1})}),h.length>2&&x.push({image:h[2],index:3,classes:"col-span-2"})),x});async function L(g){i.value=!0,m.value=g,await Ze();const x=document.getElementById(`gallery-image-${g}`);x==null||x.scrollIntoView({behavior:"smooth",block:"center"})}function r(){i.value=!1}function S(g){g.key==="Escape"&&i.value&&r()}return Ye(()=>{document.addEventListener("keydown",S)}),ye(()=>{document.removeEventListener("keydown",S)}),(g,x)=>(s(),a(I,null,[p.value.length>0?(s(),a("div",{key:0,class:Z(["gallery",k.value])},[(s(!0),a(I,null,Q(C.value,f=>(s(),a("div",{key:f.index,class:Z(["gallery-image-container",f.classes]),onClick:h=>L(f.index)},[f.image?(s(),a("img",{key:0,src:f.image.url,class:"gallery-image"},null,8,ds)):y("",!0)],10,ls))),128))],2)):d.placeholder?(s(),a("div",cs,[t("div",us,[t("img",{src:d.placeholder,class:"gallery-image"},null,8,ms)])])):y("",!0),o(Xe,{name:"scale"},{default:b(()=>[i.value?(s(),a("div",ps,[t("div",vs,[o(e(B),{severity:"contrast",rounded:"",text:"",onClick:r},{icon:b(()=>[o(e(M),{icon:e(Be)},null,8,["icon"])]),_:1}),o(e(B),{severity:"contrast",text:"",class:"underline"},{default:b(()=>[...x[0]||(x[0]=[D(" Delen ",-1)])]),_:1})]),t("div",gs,[t("div",fs,[(s(!0),a(I,null,Q(p.value,(f,h)=>(s(),a("div",{id:`gallery-image-${h}`,key:h,class:"gallery-grid-item"},[t("img",{src:f.url,alt:`Gallery image ${h+1}`,class:"gallery-grid-image"},null,8,ys)],8,hs))),128))])])])):y("",!0)]),_:1})],64))}}),ks=ee(_s,[["__scopeId","data-v-f62044c2"]]),xs={class:"grid h-full w-full grid-cols-4 grid-rows-2 gap-2 overflow-hidden rounded-xl"},bs=N({__name:"GallerySkeleton",setup(d){return(n,i)=>(s(),a("div",xs,[o(e(O),{class:"col-span-2 row-span-2",height:"100%",width:"100%"}),(s(),a(I,null,Q(4,m=>o(e(O),{key:m,height:"100%",width:"100%"})),64))]))}}),$s="/assets/location-stock-2-Dp4tSSWb.jpg",ws={key:0,class:"flex min-h-screen items-center justify-center"},Ts={class:"text-center"},Cs={class:"text-2xl font-semibold text-gray-900"},Ss={class:"mt-2 text-gray-600"},Rs={class:"space-y-6 md:space-y-8"},Is={class:"space-y-3"},Ls={class:"flex items-center justify-between gap-3"},Es={class:"text-3xl font-semibold text-gray-900"},Os={key:0,class:"flex space-x-3"},Ds={class:"hidden md:inline"},js={class:"hidden md:inline"},Ps={key:0,class:"flex items-center gap-3"},qs={class:"h-[480px] overflow-hidden rounded-2xl"},Ms={class:"grid gap-6 lg:grid-cols-3"},Bs={class:"space-y-6 lg:col-span-2"},Ws={class:"border-b border-gray-200 pb-8"},As={class:"mb-4 text-2xl font-semibold text-gray-900"},Ns={class:"space-y-4"},Fs={class:"leading-relaxed text-gray-600"},Vs={key:0,class:"space-y-6 border-b border-gray-200 pb-8"},zs={class:"text-2xl font-semibold text-gray-900"},Us={class:"space-y-6"},Gs={class:"text-2xl font-semibold text-gray-900"},Js={class:"h-[400px] overflow-hidden rounded-xl border border-slate-200"},Hs={class:"lg:col-span-1"},Ks={class:"sticky top-8"},Qs={class:"rounded-xl border border-slate-200 bg-white p-6"},Ys={class:"text-xl font-semibold text-gray-900"},Xs={class:"my-6"},Zs={key:0,class:"space-y-6"},ei={key:1,class:"text-center"},oo=N({__name:"LocationPage",props:{locationId:{}},setup(d){const{locale:n}=We(),{setPageTitle:i}=Ae(),m=he(),p=Fe(),k=rt({paramName:"week"}),{profileId:C,data:L}=fe(),{data:r,isPending:S,isError:g}=Ne(T(()=>+d.locationId),{includes:["createdBy"]}),{data:x,isPending:f,isError:h}=_e(T(()=>+d.locationId),T(()=>({inWeekOf:k.value}))),c=T({get:()=>"reservation"in p.query,set:$=>{const _={...p.query};$?_.reservation="":delete _.reservation,m.replace({query:_})}});se(r,$=>{$&&i($.name)},{immediate:!0});function j(){const $=m.resolve({name:"locations.detail",params:{locationId:d.locationId,reservation:"reservation"}});ze($.fullPath),m.push({name:"auth"})}return($,_)=>{var U,P,A,q,Y;const E=et("RouterLink");return e(g)?(s(),a("div",ws,[t("div",Ts,[t("h2",Cs,v($.$t("pages.locations.notFound.title")),1),t("p",Ss,v($.$t("pages.locations.notFound.description")),1)])])):(s(),a(I,{key:1},[t("div",Rs,[t("div",Is,[t("div",Ls,[t("h1",Es,[e(r)?(s(),a(I,{key:0},[D(v(e(r).name),1)],64)):e(S)?(s(),w(e(O),{key:1,height:"36px",width:"400px"})):y("",!0)]),(U=e(L))!=null&&U.isAdmin?(s(),a("div",Os,[e(r)&&((P=e(r))!=null&&P.isReservable)?(s(),w(E,{key:0,to:{name:"dashboard.locations.detail.reservations",params:{locationId:d.locationId}}},{default:b(()=>[o(e(B),{severity:"contrast"},{default:b(()=>[t("span",Ds,v($.$t("domains.reservations.name",2)),1),o(e(M),{icon:e(de)},null,8,["icon"])]),_:1})]),_:1},8,["to"])):e(S)?(s(),w(e(O),{key:1,height:"36px",width:"120px"})):y("",!0),o(E,{to:{name:"dashboard.locations.detail.info",params:{locationId:d.locationId}}},{default:b(()=>[o(e(B),{severity:"secondary"},{default:b(()=>[t("span",js,v($.$t("general.actions.edit")),1),o(e(M),{icon:e(Ve)},null,8,["icon"])]),_:1})]),_:1},8,["to"])])):y("",!0)]),e(r)?(s(),a("div",Ps,[o(e(oe),{severity:"contrast",class:"flex items-center gap-2 border-0 p-0"},{default:b(()=>[o(e(M),{icon:e(ge),class:"text-primary"},null,8,["icon"]),t("span",null,v(e(r).city)+", "+v(e(r).street),1)]),_:1}),o(e(oe),{severity:"contrast",class:"flex items-center gap-2 border-0 p-0"},{default:b(()=>[o(e(M),{icon:e(de),class:"text-primary"},null,8,["icon"]),t("span",null,v(e(r).seatCount)+" "+v($.$t("domains.locations.spot",e(r).seatCount).toLowerCase()),1)]),_:1})])):y("",!0)]),t("div",qs,[(A=e(r))!=null&&A.images?(s(),w(ks,{key:0,images:e(r).images,placeholder:e($s)},null,8,["images","placeholder"])):e(S)?(s(),w(bs,{key:1})):y("",!0)]),t("div",Ms,[t("div",Bs,[t("div",Ws,[t("h2",As,[e(r)?(s(),a(I,{key:0},[D(v(e(r).excerpt[e(n)]),1)],64)):e(S)?(s(),w(e(O),{key:1,height:"28px",width:"400px"})):y("",!0)]),t("div",Ns,[t("p",Fs,[e(r)?(s(),a(I,{key:0},[D(v(e(r).description[e(n)]),1)],64)):e(S)?(s(),a(I,{key:1},[o(e(O),{height:"18px",width:"100%",class:"mb-2"}),o(e(O),{height:"18px",width:"90%",class:"mb-2"}),o(e(O),{height:"18px",width:"80%"})],64)):y("",!0)])])]),e(r)?(s(),a("div",Vs,[t("h2",zs,v($.$t("pages.locations.sections.features.title")),1),o(wt,{location:e(r)},null,8,["location"])])):y("",!0),t("div",Us,[t("h2",Gs,[e(r)?(s(),a(I,{key:0},[D(v($.$t("pages.locations.sections.geolocation.title")),1)],64)):e(S)?(s(),w(e(O),{key:1,height:"28px",width:"200px"})):y("",!0)]),e(r)?(s(),w(ht,{key:0,location:e(r)},null,8,["location"])):e(S)?(s(),w(e(O),{key:1,height:"88px",width:"100%",class:"rounded-xl"})):y("",!0),t("div",Js,[e(r)?(s(),w(tt,{key:0,center:[e(r).longitude,e(r).latitude],zoom:17,interactive:!1,"geo-location-control":!1},null,8,["center"])):e(S)?(s(),w(Ct,{key:1})):y("",!0)])])]),t("div",Hs,[t("div",Ks,[t("div",Qs,[t("h3",Ys,[(q=e(r))!=null&&q.isReservable?(s(),a(I,{key:0},[D(v($.$t("pages.locations.sections.reservations.title")),1)],64)):(s(),a(I,{key:1},[D(v($.$t("domains.openings.name",2)),1)],64))]),t("div",Xs,[e(r)?(s(),a("div",Zs,[o(ke,{date:e(k),"onUpdate:date":_[0]||(_[0]=F=>pe(k)?k.value=F:null)},null,8,["date"]),o(st,{"opening-times":e(x),"current-week":e(k),"is-loading":e(f)},null,8,["opening-times","current-week","is-loading"])])):e(S)?(s(),w(Lt,{key:1})):y("",!0)]),(Y=e(r))!=null&&Y.isReservable?(s(),a(I,{key:0},[e(C)?(s(),w(e(B),{key:0,class:"w-full",onClick:_[1]||(_[1]=F=>c.value=!0)},{default:b(()=>[D(v($.$t("pages.locations.sections.reservations.create"))+" ",1),o(e(M),{icon:e(ce)},null,8,["icon"])]),_:1})):(s(),w(e(B),{key:1,class:"w-full",severity:"contrast",onClick:j},{default:b(()=>[D(v($.$t("pages.locations.sections.reservations.login"))+" ",1),o(e(M),{icon:e(ce)},null,8,["icon"])]),_:1}))],64)):e(r)&&!e(r).isReservable?(s(),a("div",ei,v($.$t("pages.locations.sections.reservations.notNeeded")),1)):y("",!0)])])])])]),e(r)?(s(),w(rs,{key:0,date:e(k),"onUpdate:date":_[2]||(_[2]=F=>pe(k)?k.value=F:null),visible:c.value,"onUpdate:visible":_[3]||(_[3]=F=>c.value=F),location:e(r)},null,8,["date","visible","location"])):y("",!0)],64))}}});export{oo as default};
