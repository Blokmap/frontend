import{q as G,m as Q,l as Y}from"./primevue-Ex1kWbwE.js";import{_ as J}from"./ActionMenu.vue_vue_type_script_setup_true_lang-D8x-0TcO.js";import{N as K}from"./NavigationLink-IHA51wPx.js";import{l as T,b6 as U,b7 as W,b8 as X,F as w,_ as Z,c as tt,P as et,u as ot,e as it,b4 as at,b5 as st,v as rt}from"./index-BH2d3-5Q.js";import{L as C,H as $,l as P,p as a,c as S,F,A as nt,e as p,y as o,Y as t,q as L,t as _,f as lt,d as g,h as D,r as N,ae as pt}from"./vue-Ch5H8NcK.js";import{a as mt,T as k}from"./TableCell-DEbrUqoT.js";import{_ as ct,a as ut}from"./SearchField.vue_vue_type_script_setup_true_lang-CwsDVBBU.js";import{D as dt}from"./DashboardContent-C7GZlxZW.js";import{_ as ft,D as gt}from"./DashboardPageHeader-DlEF0Y-P.js";import{f as vt,g as _t}from"./useProfile-CIG-owsL.js";import"@primeuix/styled";import"@primeuix/utils";import"@primeuix/utils/object";import"@primeuix/styles/base";import"@primeuix/utils/dom";import"@primeuix/utils/zindex";import"@primeuix/styles/toast";import"@primeuix/styles/accordion";import"@primeuix/utils/uuid";import"@primeuix/styles/chip";import"@primeuix/styles/autocomplete";import"@primeuix/styles/avatar";import"@primeuix/styles/blockui";import"@primeuix/styles/breadcrumb";import"@primeuix/styles/buttongroup";import"@primeuix/styles/datepicker";import"@primeuix/styles/card";import"@primeuix/styles/carousel";import"@primeuix/styles/cascadeselect";import"@primeuix/styles/checkbox";import"@primeuix/styles/checkboxgroup";import"@primeuix/styles/inputchips";import"@primeuix/styles/colorpicker";import"@primeuix/utils/eventbus";import"@primeuix/styles/dialog";import"@primeuix/styles/confirmdialog";import"@primeuix/styles/confirmpopup";import"@primeuix/styles/contextmenu";import"@primeuix/styles/paginator";import"@primeuix/styles/iconfield";import"@primeuix/styles/inputtext";import"@primeuix/styles/virtualscroller";import"@primeuix/styles/select";import"@primeuix/styles/inputnumber";import"@primeuix/styles/datatable";import"@primeuix/styles/radiobutton";import"@primeuix/styles/dataview";import"@primeuix/styles/divider";import"@primeuix/styles/dock";import"@primeuix/styles/tooltip";import"@primeuix/styles/drawer";import"@primeuix/styles/fieldset";import"@primeuix/styles/badge";import"@primeuix/styles/button";import"@primeuix/styles/message";import"@primeuix/styles/progressbar";import"@primeuix/styles/fileupload";import"@primeuix/styles/floatlabel";import"@primeuix/styles/galleria";import"@primeuix/styles/iftalabel";import"@primeuix/styles/image";import"@primeuix/styles/imagecompare";import"@primeuix/styles/inlinemessage";import"@primeuix/styles/inplace";import"@primeuix/styles/inputgroup";import"@primeuix/styles/inputotp";import"@primeuix/styles/toggleswitch";import"@primeuix/styles/knob";import"@primeuix/styles/listbox";import"@primeuix/styles/megamenu";import"@primeuix/styles/menu";import"@primeuix/styles/menubar";import"@primeuix/styles/metergroup";import"@primeuix/styles/multiselect";import"@primeuix/styles/orderlist";import"@primeuix/styles/organizationchart";import"@primeuix/styles/overlaybadge";import"@primeuix/styles/popover";import"@primeuix/styles/panel";import"@primeuix/styles/panelmenu";import"@primeuix/styles/password";import"@primeuix/styles/picklist";import"@primeuix/styles/progressspinner";import"@primeuix/styles/radiobuttongroup";import"@primeuix/styles/rating";import"@primeuix/styles/scrollpanel";import"@primeuix/styles/scrolltop";import"@primeuix/styles/togglebutton";import"@primeuix/styles/selectbutton";import"@primeuix/styles/skeleton";import"@primeuix/styles/slider";import"@primeuix/styles/speeddial";import"@primeuix/styles/tieredmenu";import"@primeuix/styles/splitbutton";import"@primeuix/styles/splitter";import"@primeuix/styles/stepper";import"@primeuix/styles/steps";import"@primeuix/styles/ripple";import"@primeuix/styles/tabmenu";import"@primeuix/styles/tabs";import"@primeuix/styles/tabview";import"@primeuix/styles/tag";import"@primeuix/styles/terminal";import"@primeuix/styles/textarea";import"@primeuix/styles/timeline";import"@primeuix/styles/toolbar";import"@primeuix/styles/tree";import"@primeuix/styles/treeselect";import"@primeuix/styles/treetable";const bt={class:"flex items-center gap-2"},ht={key:0,class:"flex items-center gap-2"},Pt=C({__name:"ProfileActionsMenu",props:{profile:{},isPending:{type:Boolean}},emits:["change:status"],setup(m,{emit:b}){const s=m,d=b,f=$(()=>[{label:"Actief",value:"active",icon:T},{label:"Geblokkeerd",value:"disabled",icon:U}]),c=$(()=>f.value.find(e=>e.value===s.profile.state)||null),i=[{label:"Locaties bekijken",icon:W,to:{name:"dashboard.profiles.locations",params:{profileId:s.profile.id}}},{label:"Autoriteiten bekijken",icon:X,to:{name:"dashboard.authorities.index",query:{profileId:s.profile.id}}}],h=async(e,r)=>{const u=e.value;u&&u!==s.profile.state&&(r(),d("change:status",s.profile.id,u))};return(e,r)=>(g(),P(J,{"is-pending":m.isPending},{trigger:a(({toggle:u})=>[lt(e.$slots,"trigger",{toggle:u},void 0,!0)]),content:a(({hideMenu:u})=>[p("div",null,[r[0]||(r[0]=p("label",{class:"mb-1 block text-sm font-medium text-gray-700"}," Status wijzigen ",-1)),o(t(G),{"model-value":s.profile.state,options:f.value,loading:m.isPending,"option-label":"label","option-value":"value",placeholder:"Selecteer nieuwe status",class:"w-full min-w-[200px]",onChange:n=>h(n,u)},{option:a(({option:n})=>[p("div",bt,[o(t(w),{icon:n.icon},null,8,["icon"]),p("span",null,_(n.label),1)])]),value:a(({value:n})=>[n&&c.value?(g(),S("div",ht,[o(t(w),{icon:c.value.icon},null,8,["icon"]),p("span",null,_(c.value.label),1)])):L("",!0)]),_:1},8,["model-value","options","loading","onChange"])])]),navigation:a(({hideMenu:u})=>[(g(),S(F,null,nt(i,n=>o(K,{key:n.label,icon:n.icon,label:n.label,to:n.to,onClick:u},null,8,["icon","label","to","onClick"])),64))]),_:3},8,["is-pending"]))}}),kt=Z(Pt,[["__scopeId","data-v-2996b0df"]]),xt={class:"flex w-full items-center justify-center gap-2"},yt=C({__name:"ProfileStateBadge",props:{profile:{}},setup(m){const b={active:"success",disabled:"danger",deleted:"contrast"},s={active:T,disabled:U,deleted:tt},d={active:"Actief",disabled:"Banned",deleted:"Verwijderd"};return(f,c)=>(g(),P(t(Q),{severity:b[m.profile.state],class:"w-[90px]"},{default:a(()=>[p("div",xt,[o(t(w),{icon:s[m.profile.state]},null,8,["icon"]),p("span",null,_(d[m.profile.state]),1)])]),_:1},8,["severity"]))}}),Ct={class:"flex items-center space-x-3"},wt={class:"h-12 w-12 flex-shrink-0"},$t={class:"min-w-0 flex-1"},St={class:"truncate text-sm font-medium text-slate-900"},At={class:"truncate text-xs text-slate-500"},It=C({__name:"ProfileTable",props:{profiles:{},loading:{type:Boolean},isProfilePending:{type:Function}},emits:["click:profile","change:status"],setup(m,{emit:b}){const s=m,d=b,f=i=>{d("click:profile",i)},c=(i,h)=>{d("change:status",i,h)};return(i,h)=>(g(),P(mt,{value:m.profiles,"onClick:row":f},{row:a(({data:e})=>[o(k,{column:"Profiel"},{default:a(()=>[p("div",Ct,[p("div",wt,[o(et,{profile:e},null,8,["profile"])]),p("div",$t,[p("div",St,_(e.firstName)+" "+_(e.lastName),1),p("div",At,"@"+_(e.username),1)])])]),_:2},1024),o(k,{column:"E-mailadres"},{default:a(()=>[D(_(e.email),1)]),_:2},1024),o(k,{column:"Institutie"},{default:a(()=>{var r;return[D(_(((r=e.institution)==null?void 0:r.name)||"-"),1)]}),_:2},1024),o(k,{column:"Status"},{default:a(()=>[o(yt,{profile:e},null,8,["profile"])]),_:2},1024),o(k,{column:"Acties"},{default:a(()=>{var r;return[o(kt,{profile:e,"is-pending":(r=s.isProfilePending)==null?void 0:r.call(s,e.id),"onChange:status":c},null,8,["profile","is-pending"])]}),_:2},1024)]),_:1},8,["value"]))}}),Do=C({__name:"ProfilesIndexPage",setup(m){const b=rt(),s=ot(),{t:d}=it(),f=N(""),c=N({query:"",page:1,perPage:25}),{data:i,refetch:h,isFetching:e,isLoading:r}=vt(c),{mutateAsync:u,isPending:n,variables:j}=_t(),{data:q}=at(),M=$(()=>{var l;return d("pages.dashboard.profiles.index.title",[st((l=q.value)==null?void 0:l.profileCount)??"..."])}),E=l=>{var v;return n.value&&((v=j.value)==null?void 0:v.profileId)===l},H=l=>{c.value.page=l.page+1},O=pt(()=>{c.value.query=f.value,c.value.page=1},300);function R(l){b.push({name:"profiles.detail",params:{profileId:l.id}})}async function z(l,v){await u({profileId:l,state:v}),await h();const x=v==="disabled"?"geblokkeerd":"geactiveerd";s.add({severity:"success",summary:d("domains.profiles.success.statusUpdated"),detail:d("domains.profiles.success.statusUpdatedDetail",[x])})}return(l,v)=>(g(),P(dt,null,{default:a(()=>{var x,A,I;return[t(r)?(g(),P(ft,{key:0})):(g(),S(F,{key:1},[o(gt,{title:M.value},{metadata:a(()=>{var y,V,B;return[o(ut,{"current-count":(y=t(i))==null?void 0:y.data.length,"total-count":(V=t(i))==null?void 0:V.total,truncated:(B=t(i))==null?void 0:B.truncated,"empty-message":l.$t("pages.dashboard.profiles.index.empty")},null,8,["current-count","total-count","truncated","empty-message"])]}),filters:a(()=>[o(ct,{modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=y=>f.value=y),placeholder:l.$t("pages.dashboard.profiles.index.search"),loading:t(e),onInput:t(O)},null,8,["modelValue","placeholder","loading","onInput"])]),_:1},8,["title"]),o(It,{profiles:(x=t(i))==null?void 0:x.data,loading:t(r),"is-profile-pending":E,"onClick:profile":R,"onChange:status":z},null,8,["profiles","loading"]),(I=(A=t(i))==null?void 0:A.data)!=null&&I.length?(g(),P(t(Y),{key:0,first:t(i).perPage*(t(i).page-1),rows:t(i).perPage,"total-records":t(i).total,onPage:H},null,8,["first","rows","total-records"])):L("",!0)],64))]}),_:1}))}});export{Do as default};
