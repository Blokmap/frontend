import{L as Y,a6 as N,r as I,H as k,o as Z,ag as Q,c as d,F as T,y as o,p as u,q as m,e as a,s as O,h as D,Y as s,J as w,z as ee,A as te,t as b,G as ae,d as c}from"./vue-Ch5H8NcK.js";import{a as _,B as se,h as ne,g as le}from"./primevue-Ex1kWbwE.js";import{L as oe}from"./LocationBuilderCard-DRy4lkq-.js";import{F as g,aV as $,c as R,aC as K,aW as X,aX as H,aY as ie,_ as re}from"./index-BH2d3-5Q.js";import{L as E}from"./helpers-CQSRa6mq.js";const de=["image/jpeg","image/png","image/webp"],ue=["JPEG","PNG","WEBP"],ce="5MB",ve={class:"text-sm text-gray-600"},ge={class:"ml-2 text-gray-500"},fe={key:0,class:"relative overflow-hidden rounded-lg"},me=["src"],pe={class:"primary-image__badge"},xe={class:"image-actions"},ye={class:"image-actions__buttons"},be={key:1,class:"images-grid"},_e=["onDragstart","onDrop","onTouchstart"],he=["src","alt"],Ae={class:"image-actions"},Ie={class:"image-actions__buttons"},ke={class:"image-index"},De={class:"text-center"},Te={key:1,class:"space-y-3"},we={class:"text-center"},Ee={key:2,class:"text-center text-sm text-gray-500"},Me={class:"space-y-4"},Ue={class:"space-y-3"},Ce={class:"flex items-center gap-3"},Se={class:"icon-container icon-container--primary"},Pe={class:"text-xs text-gray-500"},Ve={class:"space-y-3"},Le={class:"flex items-center gap-3"},Ge={class:"icon-container icon-container--secondary"},Be={class:"flex justify-end gap-3"},ze=Y({__name:"LocationImagesBuilder",props:{modelValue:{required:!0,default:()=>[]},modelModifiers:{},substeps:{default:[]},substepsModifiers:{}},emits:["update:modelValue","update:substeps"],setup(M){const n=N(M,"modelValue"),q=N(M,"substeps"),f=I(""),v=I(null),p=I(!1),y=I(!1),h=k(()=>n.value.length<E.MAX_IMAGES),U=k(()=>[...n.value].sort((l,e)=>(l.index??0)-(e.index??0))),A=k(()=>n.value.find(l=>l.index===0)),C=k(()=>U.value.filter(l=>l.index!==0));Z(()=>{n.value.length===0&&(p.value=!0)}),Q(()=>{q.value=[{label:"Afbeeldingen toevoegen",isCompleted:n.value.length>0},{label:"Hoofdafbeelding instellen",isCompleted:n.value.length>0}]});function S(){!f.value||!h.value||(n.value.push({imageUrl:f.value,tempUrl:f.value,isPrimary:n.value.length===0,index:n.value.length}),f.value="",p.value=!1)}function P(l){n.value=n.value.filter(e=>e.index!==l),U.value.forEach((e,t)=>{e.index=t,e.isPrimary=t===0})}function J(l){n.value.forEach(e=>{e.index===l?(e.index=0,e.isPrimary=!0):(e.index??0)<l&&(e.index=(e.index??0)+1,e.isPrimary=!1)})}function W(l){var i;if(!((i=l.files)!=null&&i.length))return;const e=n.value.length,t=l.files.slice(0,E.MAX_IMAGES-e).map((r,x)=>({tempUrl:URL.createObjectURL(r),file:r,isPrimary:e+x===0,index:e+x}));n.value.push(...t),p.value=!1}function V(){p.value=!0,f.value=""}function L(l,e){const t=n.value.find(i=>i.index===e);t&&(v.value=t,y.value=!0,l.dataTransfer&&(l.dataTransfer.effectAllowed="move",l.dataTransfer.setData("text/plain","")))}function G(l){l.preventDefault(),l.dataTransfer&&(l.dataTransfer.dropEffect="move")}function B(l,e){if(l.preventDefault(),!v.value)return;const t=n.value.find(x=>x.index===e);if(!t||v.value===t)return;const i=v.value.index??0,r=t.index??0;v.value.index=r,t.index=i,n.value.forEach(x=>{x.isPrimary=x.index===0}),n.value=[...n.value]}function z(){v.value=null,y.value=!1}function j(l,e){const t=n.value.find(i=>i.index===e);t&&(v.value=t,y.value=!0)}function F(){v.value=null,y.value=!1}return(l,e)=>(c(),d(T,null,[o(oe,{icon:s(X)},{header:u(()=>[e[8]||(e[8]=a("h3",{class:"text-xl font-semibold text-gray-900"},"Afbeeldingen",-1)),a("p",ve,[e[7]||(e[7]=D(" Voeg afbeeldingen toe van uw locatie ",-1)),a("span",ge,"("+b(n.value.length)+"/10)",1)])]),default:u(()=>[n.value.length>0?(c(),d(T,{key:0},[A.value?(c(),d("div",fe,[a("div",{class:O(["primary-image group",{dragging:y.value&&v.value===A.value}]),draggable:"true",onDragstart:e[1]||(e[1]=t=>L(t,0)),onDragover:G,onDrop:e[2]||(e[2]=t=>B(t,0)),onDragend:z,onTouchstart:e[3]||(e[3]=t=>j(t,0)),onTouchend:F},[A.value.tempUrl?(c(),d("img",{key:0,src:A.value.tempUrl,alt:"Hoofdafbeelding"},null,8,me)):m("",!0),a("div",pe,[o(s(g),{icon:s($),class:"h-3 w-3"},null,8,["icon"]),e[9]||(e[9]=D(" Hoofdafbeelding ",-1))]),a("div",xe,[a("div",ye,[o(s(_),{size:"small",severity:"danger",class:"action-button action-button--danger",rounded:"",onClick:e[0]||(e[0]=w(t=>P(0),["stop"]))},{default:u(()=>[o(s(g),{icon:s(R)},null,8,["icon"])]),_:1})])])],34)])):m("",!0),C.value.length>0||h.value?(c(),d("div",be,[o(ee,{tag:"div",class:"contents"},{default:u(()=>[(c(!0),d(T,null,te(C.value,(t,i)=>(c(),d("div",{key:t.tempUrl||t.imageUrl||i,class:O(["secondary-image group",{dragging:y.value&&v.value===t}]),draggable:"true",onDragstart:r=>L(r,t.index??0),onDragover:G,onDrop:r=>B(r,t.index??0),onDragend:z,onTouchstart:r=>j(r,t.index??0),onTouchend:F},[t.tempUrl?(c(),d("img",{key:0,src:t.tempUrl,alt:`Afbeelding ${i+2}`},null,8,he)):m("",!0),a("div",Ae,[a("div",Ie,[o(s(_),{size:"small",severity:"secondary",class:"action-button action-button--secondary",rounded:"",onClick:w(r=>J(t.index??0),["stop"])},{default:u(()=>[o(s(g),{icon:s($)},null,8,["icon"])]),_:1},8,["onClick"]),o(s(_),{size:"small",severity:"danger",class:"action-button action-button--danger",rounded:"",onClick:w(r=>P(t.index??0),["stop"])},{default:u(()=>[o(s(g),{icon:s(R)},null,8,["icon"])]),_:1},8,["onClick"])])]),a("div",ke,b(i+2),1)],42,_e))),128))]),_:1}),h.value?(c(),d("div",{key:0,class:"add-placeholder",onClick:V},[a("div",De,[o(s(g),{icon:s(K),class:"mb-2 h-8 w-8 text-gray-400"},null,8,["icon"]),e[10]||(e[10]=a("div",{class:"text-xs text-gray-500"},"Voeg toe",-1))])])):m("",!0)])):m("",!0)],64)):m("",!0),h.value&&n.value.length===0?(c(),d("div",Te,[a("div",{class:"empty-placeholder",onClick:V},[a("div",we,[o(s(g),{icon:s(X),class:"mb-3 h-12 w-12 text-gray-400"},null,8,["icon"]),e[11]||(e[11]=a("h4",{class:"text-lg font-medium text-gray-900"},"Voeg afbeeldingen toe",-1)),e[12]||(e[12]=a("p",{class:"text-sm text-gray-500"}," Klik hier om uw eerste afbeelding toe te voegen ",-1))])])])):m("",!0),n.value.length>1?(c(),d("p",Ee," Sleep afbeeldingen om de volgorde te wijzigen. Klik op de ster om een hoofdafbeelding in te stellen. ")):m("",!0)]),_:1},8,["icon"]),o(s(le),{visible:p.value,"onUpdate:visible":e[6]||(e[6]=t=>p.value=t),header:"Afbeelding toevoegen",style:{width:"400px"},modal:"",draggable:!1,resizable:!1},{footer:u(()=>[a("div",Be,[o(s(_),{severity:"secondary",outlined:"",size:"small",onClick:e[5]||(e[5]=t=>p.value=!1)},{default:u(()=>[...e[16]||(e[16]=[D(" Annuleren ",-1)])]),_:1}),o(s(_),{disabled:!f.value,size:"small",onClick:S},{default:u(()=>[o(s(g),{icon:s(K),class:"mr-2"},null,8,["icon"]),e[17]||(e[17]=D(" Toevoegen ",-1))]),_:1},8,["disabled"])])]),default:u(()=>[a("div",Me,[a("div",Ue,[a("div",Ce,[a("div",Se,[o(s(g),{icon:s(H)},null,8,["icon"])]),e[13]||(e[13]=a("div",null,[a("h4",{class:"font-semibold text-gray-900"},"Bestanden uploaden"),a("p",{class:"text-sm text-gray-500"}," Kies een of meerdere bestanden van uw computer ")],-1))]),o(s(se),{mode:"basic",accept:s(de).join(","),multiple:!0,auto:!0,"choose-label":"Selecteer bestanden",class:"w-full",onSelect:W},{chooseicon:u(()=>[o(s(g),{icon:s(H)},null,8,["icon"])]),_:1},8,["accept"]),a("div",Pe,b(s(ue).join(", "))+" • Max. "+b(s(ce))+" per bestand • Tot "+b(s(E).MAX_IMAGES-n.value.length)+" bestanden ",1)]),e[15]||(e[15]=a("div",{class:"relative flex items-center justify-center"},[a("div",{class:"absolute inset-x-0 top-1/2 h-px bg-gray-200"}),a("span",{class:"relative bg-white px-2 text-sm text-gray-500"},"of")],-1)),a("div",Ve,[a("div",Le,[a("div",Ge,[o(s(g),{icon:s(ie)},null,8,["icon"])]),e[14]||(e[14]=a("div",null,[a("h4",{class:"font-semibold text-gray-900"},"URL opgeven"),a("p",{class:"text-sm text-gray-500"},"Directe link naar een afbeelding")],-1))]),o(s(ne),{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),class:"w-full",placeholder:"https://example.com/image.jpg",onKeyup:ae(S,["enter"])},null,8,["modelValue"])])])]),_:1},8,["visible"])],64))}}),Re=re(ze,[["__scopeId","data-v-8577e571"]]);export{Re as L};
