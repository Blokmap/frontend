import{g as M,z,n as F,a as $}from"./primevue-Ex1kWbwE.js";import{D as B,u as P}from"./useRouteDate-DMrgQeUU.js";import{_ as N,o as G,C as H,a as Y,b as K,c as Q,d as J}from"./useOpeningTimes-ClUtctVC.js";import{e as q,az as X,F as C,aA as h,aB as Z,c as ee,aC as te,o as ie,aD as E,_ as L,t as A,u as oe}from"./index-BH2d3-5Q.js";import{f as ne,o as se}from"./index-DyskoCvK.js";import{L as I,a7 as j,a6 as ae,r as _,w as le,H as R,l as V,Y as s,p as b,e as n,c as v,q as O,y as m,h as S,F as re,A as me,t as w,d as p,s as de,ag as pe}from"./vue-Ch5H8NcK.js";import{D as ue}from"./DashboardContent-C7GZlxZW.js";import{u as ce}from"./useLocationEditing-Dl2vaYTn.js";import"@primeuix/styled";import"@primeuix/utils";import"@primeuix/utils/object";import"@primeuix/styles/base";import"@primeuix/utils/dom";import"@primeuix/utils/zindex";import"@primeuix/styles/toast";import"@primeuix/styles/accordion";import"@primeuix/utils/uuid";import"@primeuix/styles/chip";import"@primeuix/styles/autocomplete";import"@primeuix/styles/avatar";import"@primeuix/styles/blockui";import"@primeuix/styles/breadcrumb";import"@primeuix/styles/buttongroup";import"@primeuix/styles/datepicker";import"@primeuix/styles/card";import"@primeuix/styles/carousel";import"@primeuix/styles/cascadeselect";import"@primeuix/styles/checkbox";import"@primeuix/styles/checkboxgroup";import"@primeuix/styles/inputchips";import"@primeuix/styles/colorpicker";import"@primeuix/utils/eventbus";import"@primeuix/styles/dialog";import"@primeuix/styles/confirmdialog";import"@primeuix/styles/confirmpopup";import"@primeuix/styles/contextmenu";import"@primeuix/styles/paginator";import"@primeuix/styles/iconfield";import"@primeuix/styles/inputtext";import"@primeuix/styles/virtualscroller";import"@primeuix/styles/select";import"@primeuix/styles/inputnumber";import"@primeuix/styles/datatable";import"@primeuix/styles/radiobutton";import"@primeuix/styles/dataview";import"@primeuix/styles/divider";import"@primeuix/styles/dock";import"@primeuix/styles/tooltip";import"@primeuix/styles/drawer";import"@primeuix/styles/fieldset";import"@primeuix/styles/badge";import"@primeuix/styles/button";import"@primeuix/styles/message";import"@primeuix/styles/progressbar";import"@primeuix/styles/fileupload";import"@primeuix/styles/floatlabel";import"@primeuix/styles/galleria";import"@primeuix/styles/iftalabel";import"@primeuix/styles/image";import"@primeuix/styles/imagecompare";import"@primeuix/styles/inlinemessage";import"@primeuix/styles/inplace";import"@primeuix/styles/inputgroup";import"@primeuix/styles/inputotp";import"@primeuix/styles/toggleswitch";import"@primeuix/styles/knob";import"@primeuix/styles/listbox";import"@primeuix/styles/megamenu";import"@primeuix/styles/menu";import"@primeuix/styles/menubar";import"@primeuix/styles/metergroup";import"@primeuix/styles/multiselect";import"@primeuix/styles/orderlist";import"@primeuix/styles/organizationchart";import"@primeuix/styles/overlaybadge";import"@primeuix/styles/popover";import"@primeuix/styles/panel";import"@primeuix/styles/panelmenu";import"@primeuix/styles/password";import"@primeuix/styles/picklist";import"@primeuix/styles/progressspinner";import"@primeuix/styles/radiobuttongroup";import"@primeuix/styles/rating";import"@primeuix/styles/scrollpanel";import"@primeuix/styles/scrolltop";import"@primeuix/styles/togglebutton";import"@primeuix/styles/selectbutton";import"@primeuix/styles/skeleton";import"@primeuix/styles/slider";import"@primeuix/styles/speeddial";import"@primeuix/styles/tieredmenu";import"@primeuix/styles/splitbutton";import"@primeuix/styles/splitter";import"@primeuix/styles/stepper";import"@primeuix/styles/steps";import"@primeuix/styles/ripple";import"@primeuix/styles/tabmenu";import"@primeuix/styles/tabs";import"@primeuix/styles/tabview";import"@primeuix/styles/tag";import"@primeuix/styles/terminal";import"@primeuix/styles/textarea";import"@primeuix/styles/timeline";import"@primeuix/styles/toolbar";import"@primeuix/styles/tree";import"@primeuix/styles/treeselect";import"@primeuix/styles/treetable";import"./helpers-BZBkp5df.js";import"./helpers-CQSRa6mq.js";const ge={class:"flex items-center gap-2"},fe={key:0},ve={key:1},ye={class:"space-y-5"},Te={class:"grid grid-cols-3 items-end gap-3"},ke={class:"space-y-1"},xe={key:0,class:"repetition"},De={class:"flex items-center gap-3"},be={for:"repetition-enabled",class:"flex cursor-pointer items-center gap-2 text-sm font-medium"},_e={key:0,class:"space-y-4 border-t border-gray-200 pt-2"},Ce={class:"flex gap-1"},Oe=["onClick"],Ee={key:0},Ve={key:1,class:"repetition"},we={class:"flex items-center gap-3"},Ie={for:"apply-to-sequence",class:"flex cursor-pointer items-center gap-2 text-sm font-medium"},Se={class:"flex w-full items-center justify-between gap-3"},Ue={key:0},Fe={key:1},$e=I({__name:"OpeningTimeDialog",props:j({openingTime:{},isEditing:{type:[Boolean,null]}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:j(["save","delete"],["update:visible"]),setup(d,{emit:T}){const a=d,o=ae(d,"visible"),u=T,{locale:y}=q(),i=_({...E}),c=_(!1);le(()=>a.openingTime,l=>{const e=l??E;i.value={...e},c.value=!1},{deep:!0,immediate:!0});const r=R({get:()=>!!i.value.repetition,set:l=>{i.value.repetition=l?{...X}:void 0}});function k(l){const e=i.value.repetition;if(!e)return;const t=e.selectedDays||[],D=t.indexOf(l);D>-1?t.splice(D,1):t.push(l),e.selectedDays=[...t]}function f(l){var t;const e=i.value.repetition;return((t=e==null?void 0:e.selectedDays)==null?void 0:t.includes(l))||!1}function x(){const l={...i.value};u("save",l,c.value)}function g(){!a.openingTime||!a.isEditing||u("delete",a.openingTime,c.value)}return(l,e)=>(p(),V(s(M),{visible:o.value,"onUpdate:visible":e[7]||(e[7]=t=>o.value=t),style:{width:"480px"},modal:""},{header:b(()=>[n("div",ge,[m(s(C),{icon:s(ie),class:"text-primary-500"},null,8,["icon"]),d.isEditing?(p(),v("span",fe,"Openingstijd Bewerken")):(p(),v("span",ve,"Openingstijd Toevoegen"))])]),footer:b(()=>[n("div",Se,[d.isEditing?(p(),V(s($),{key:0,severity:"contrast",class:"text-sm",onClick:g},{default:b(()=>[m(s(C),{icon:s(ee),class:"mr-2"},null,8,["icon"]),c.value?(p(),v("span",Ue,"Verwijder Groep")):(p(),v("span",Fe,"Verwijderen"))]),_:1})):O("",!0),m(s($),{onClick:x,class:"ml-auto text-sm"},{default:b(()=>[m(s(C),{icon:s(te),class:"mr-2"},null,8,["icon"]),S(" "+w(d.isEditing?"Bijwerken":"Toevoegen"),1)]),_:1})])]),default:b(()=>[n("div",ye,[n("div",Te,[n("div",null,[e[8]||(e[8]=n("label",{class:"mb-1 block text-xs font-medium text-gray-600"},"Datum",-1)),m(B,{date:i.value.day,"onUpdate:date":e[0]||(e[0]=t=>i.value.day=t)},null,8,["date"])]),n("div",null,[e[9]||(e[9]=n("label",{class:"mb-1 block text-xs font-medium text-gray-600"},"Van",-1)),m(N,{modelValue:i.value.startTime,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.startTime=t)},null,8,["modelValue"])]),n("div",null,[e[10]||(e[10]=n("label",{class:"mb-1 block text-xs font-medium text-gray-600"},"Tot",-1)),m(N,{modelValue:i.value.endTime,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.endTime=t)},null,8,["modelValue"])])]),n("div",ke,[e[11]||(e[11]=n("label",{class:"block text-sm font-medium text-gray-700"},"Stoelen",-1)),m(s(z),{modelValue:i.value.seatCount,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.seatCount=t),min:1,class:"w-full"},null,8,["modelValue"])]),d.isEditing?O("",!0):(p(),v("div",xe,[n("div",De,[m(s(F),{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value=t),binary:"","input-id":"repetition-enabled"},null,8,["modelValue"]),n("label",be,[m(s(C),{icon:s(h),class:"text-primary-500"},null,8,["icon"]),e[12]||(e[12]=S(" Herhaling inschakelen ",-1))])]),r.value?(p(),v("div",_e,[n("div",null,[e[13]||(e[13]=n("label",{class:"mb-2 block text-xs font-medium text-gray-600"},"Dagen",-1)),n("div",Ce,[(p(!0),v(re,null,me(s(Z),t=>(p(),v("button",{key:t,class:de([{selected:f(t)},"day-btn"]),onClick:D=>k(t)},w(s(ne)(t,"narrow",s(y))),11,Oe))),128))])]),i.value.repetition?(p(),v("div",Ee,[e[14]||(e[14]=n("label",{class:"mb-1 block text-xs font-medium text-gray-600"}," Einddatum ",-1)),m(B,{date:i.value.repetition.endDate,"onUpdate:date":e[5]||(e[5]=t=>i.value.repetition.endDate=t)},null,8,["date"])])):O("",!0)])):O("",!0)])),i.value.sequenceId?(p(),v("div",Ve,[n("div",we,[m(s(F),{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=t=>c.value=t),binary:"","input-id":"apply-to-sequence"},null,8,["modelValue"]),n("label",Ie,[m(s(C),{icon:s(h),class:"text-primary-500"},null,8,["icon"]),e[15]||(e[15]=S(" Wijzigingen toepassen op hele groep ",-1))])])])):O("",!0)])]),_:1},8,["visible"]))}}),Be=L($e,[["__scopeId","data-v-9af220a5"]]),Ne=["onClick"],he={class:"time-display"},Ae={class:"time-text"},je=I({__name:"OpeningTimesCalendar",props:{openingTimes:{},inWeekOf:{},minDate:{},maxDate:{}},emits:["click:cell","click:slot","drag:slot"],setup(d,{emit:T}){const a=d,o=T,u=R(()=>G(a.openingTimes));function y(r){o("click:cell",r)}function i(r){o("click:slot",r)}function c(r,k,f,x){r.metadata&&o("drag:slot",r,{metadata:r.metadata,startTime:k,endTime:f,day:x})}return(r,k)=>(p(),V(H,{"current-week":d.inWeekOf,"time-slots":u.value,"min-date":d.minDate,"max-date":d.maxDate,"enable-dragging":!0,"time-interval":15,"min-slot-duration":15,"onClick:cell":y,"onDrag:slot":c},{"time-slot":b(({slot:f})=>[n("div",{class:"opening-time-card",onClick:x=>i(f)},[n("div",he,[n("span",Ae,w(s(A)(f.startTime))+"-"+w(s(A)(f.endTime)),1)])],8,Ne)]),_:1},8,["current-week","time-slots","min-date","max-date"]))}}),qe=L(je,[["__scopeId","data-v-e1e6adc1"]]),Le={class:"space-y-6"},Re=I({__name:"LocationOpeningBuilder",props:{openingTimes:{}},emits:["create","update","delete"],setup(d,{emit:T}){const a=T,o=P({paramName:"inWeekOf",updateMethod:"push"}),u=_(!1),y=_(null),i=_(!1);function c(e){o.value=e}function r(e){e?y.value={...E,day:e.day,startTime:e.startTime,endTime:e.endTime}:y.value={...E},i.value=!1,u.value=!0}function k(e){e.metadata&&(y.value={...e.metadata},i.value=!0,u.value=!0)}function f(e,t){var U;const D=(U=e.metadata)==null?void 0:U.id;if(!D||!e.metadata)return;const W={...e.metadata,day:t.day,startTime:t.startTime,endTime:t.endTime};a("update",D,W)}function x(e,t){if(i.value){if(!e.id)return;a("update",e.id,e,t)}else a("create",e);u.value=!1}function g(e,t){e.id&&(a("delete",e.id,t),u.value=!1)}function l(e){r(e)}return(e,t)=>(p(),v("div",Le,[m(Y,{date:s(o),"onUpdate:date":c},null,8,["date"]),m(qe,{"opening-times":d.openingTimes,"in-week-of":s(o),"onClick:cell":l,"onClick:slot":k,"onDrag:slot":f},null,8,["opening-times","in-week-of"]),m(Be,{visible:u.value,"onUpdate:visible":t[0]||(t[0]=D=>u.value=D),"opening-time":y.value,"is-editing":i.value,onSave:x,onDelete:g},null,8,["visible","opening-time","is-editing"])]))}}),Mi=I({__name:"LocationOpeningsPage",props:{locationId:{}},setup(d){const T=d,a=oe(),{t:o}=q(),u=ce(),{mutateAsync:y}=K({onSuccess:()=>{a.add({severity:"success",summary:o("domains.openings.success.created"),detail:o("domains.openings.success.createdDetail")})},onError:()=>{a.add({severity:"error",summary:o("domains.openings.errors.createFailed"),detail:o("domains.openings.errors.createFailedDetail")})}}),{mutateAsync:i}=Q({onSuccess:()=>{a.add({severity:"success",summary:o("domains.openings.success.updated"),detail:o("domains.openings.success.updatedDetail")})},onError:()=>{a.add({severity:"error",summary:o("domains.openings.errors.updateFailed"),detail:o("domains.openings.errors.updateFailedDetail")})}}),{mutateAsync:c}=J({onSuccess:()=>{a.add({severity:"success",summary:o("domains.openings.success.deleted"),detail:o("domains.openings.success.deletedDetail")})},onError:()=>{a.add({severity:"error",summary:o("domains.openings.errors.deleteFailed"),detail:o("domains.openings.errors.deleteFailedDetail")})}}),r=_([]);pe(()=>{if(!u.location)return;const g=(u.location.openingTimes||[]).map(se);r.value=g});async function k(g){try{await y({locationId:+T.locationId,openings:[g]})}catch{}}async function f(g,l,e){i({locationId:+T.locationId,openingTimeId:g,opening:l,sequence:e})}async function x(g,l){c({locationId:+T.locationId,openingTimeId:g,sequence:l})}return(g,l)=>(p(),V(ue,null,{default:b(()=>[m(Re,{"opening-times":r.value,onCreate:k,onUpdate:f,onDelete:x},null,8,["opening-times"])]),_:1}))}});export{Mi as default};
