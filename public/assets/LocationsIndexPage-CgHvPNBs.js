import{q as O,a as Q,l as X}from"./primevue-Ex1kWbwE.js";import{L as z,a as J}from"./LocationDataList-DKNPPeRF.js";import{a$ as K,X as W,Y as Z,F as g,b0 as b,u as tt,e as ot,b1 as et,b2 as at,b3 as it,b4 as st,b5 as nt,aC as rt}from"./index-BH2d3-5Q.js";import{L as $,a6 as lt,H as P,l as f,Y as t,p as s,e as d,c as y,F as _,y as a,t as h,d as c,r as V,q as pt,ae as mt,i as ct,h as ut}from"./vue-Ch5H8NcK.js";import{_ as dt,a as gt}from"./SearchField.vue_vue_type_script_setup_true_lang-CwsDVBBU.js";import{D as ft}from"./DashboardContent-C7GZlxZW.js";import{_ as vt,D as bt}from"./DashboardPageHeader-DlEF0Y-P.js";import"@primeuix/styled";import"@primeuix/utils";import"@primeuix/utils/object";import"@primeuix/styles/base";import"@primeuix/utils/dom";import"@primeuix/utils/zindex";import"@primeuix/styles/toast";import"@primeuix/styles/accordion";import"@primeuix/utils/uuid";import"@primeuix/styles/chip";import"@primeuix/styles/autocomplete";import"@primeuix/styles/avatar";import"@primeuix/styles/blockui";import"@primeuix/styles/breadcrumb";import"@primeuix/styles/buttongroup";import"@primeuix/styles/datepicker";import"@primeuix/styles/card";import"@primeuix/styles/carousel";import"@primeuix/styles/cascadeselect";import"@primeuix/styles/checkbox";import"@primeuix/styles/checkboxgroup";import"@primeuix/styles/inputchips";import"@primeuix/styles/colorpicker";import"@primeuix/utils/eventbus";import"@primeuix/styles/dialog";import"@primeuix/styles/confirmdialog";import"@primeuix/styles/confirmpopup";import"@primeuix/styles/contextmenu";import"@primeuix/styles/paginator";import"@primeuix/styles/iconfield";import"@primeuix/styles/inputtext";import"@primeuix/styles/virtualscroller";import"@primeuix/styles/select";import"@primeuix/styles/inputnumber";import"@primeuix/styles/datatable";import"@primeuix/styles/radiobutton";import"@primeuix/styles/dataview";import"@primeuix/styles/divider";import"@primeuix/styles/dock";import"@primeuix/styles/tooltip";import"@primeuix/styles/drawer";import"@primeuix/styles/fieldset";import"@primeuix/styles/badge";import"@primeuix/styles/button";import"@primeuix/styles/message";import"@primeuix/styles/progressbar";import"@primeuix/styles/fileupload";import"@primeuix/styles/floatlabel";import"@primeuix/styles/galleria";import"@primeuix/styles/iftalabel";import"@primeuix/styles/image";import"@primeuix/styles/imagecompare";import"@primeuix/styles/inlinemessage";import"@primeuix/styles/inplace";import"@primeuix/styles/inputgroup";import"@primeuix/styles/inputotp";import"@primeuix/styles/toggleswitch";import"@primeuix/styles/knob";import"@primeuix/styles/listbox";import"@primeuix/styles/megamenu";import"@primeuix/styles/menu";import"@primeuix/styles/menubar";import"@primeuix/styles/metergroup";import"@primeuix/styles/multiselect";import"@primeuix/styles/orderlist";import"@primeuix/styles/organizationchart";import"@primeuix/styles/overlaybadge";import"@primeuix/styles/popover";import"@primeuix/styles/panel";import"@primeuix/styles/panelmenu";import"@primeuix/styles/password";import"@primeuix/styles/picklist";import"@primeuix/styles/progressspinner";import"@primeuix/styles/radiobuttongroup";import"@primeuix/styles/rating";import"@primeuix/styles/scrollpanel";import"@primeuix/styles/scrolltop";import"@primeuix/styles/togglebutton";import"@primeuix/styles/selectbutton";import"@primeuix/styles/skeleton";import"@primeuix/styles/slider";import"@primeuix/styles/speeddial";import"@primeuix/styles/tieredmenu";import"@primeuix/styles/splitbutton";import"@primeuix/styles/splitter";import"@primeuix/styles/stepper";import"@primeuix/styles/steps";import"@primeuix/styles/ripple";import"@primeuix/styles/tabmenu";import"@primeuix/styles/tabs";import"@primeuix/styles/tabview";import"@primeuix/styles/tag";import"@primeuix/styles/terminal";import"@primeuix/styles/textarea";import"@primeuix/styles/timeline";import"@primeuix/styles/toolbar";import"@primeuix/styles/tree";import"@primeuix/styles/treeselect";import"@primeuix/styles/treetable";import"./helpers-CQSRa6mq.js";import"./ActionMenu.vue_vue_type_script_setup_true_lang-D8x-0TcO.js";import"./NavigationLink-IHA51wPx.js";const yt={class:"flex items-center gap-2"},_t={class:"flex items-center gap-3"},ht=$({__name:"LocationStateSelect",props:{status:{default:null},statusModifiers:{}},emits:["update:status"],setup(L){const u=lt(L,"status"),p=[{label:"In Afwachting",value:"pending",icon:K},{label:"Goedgekeurd",value:"approved",icon:W},{label:"Afgekeurd",value:"rejected",icon:Z}],m=P(()=>p.find(n=>n.value===u.value)||null);return(n,e)=>(c(),f(t(O),{class:"min-w-[250px]",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=r=>u.value=r),options:p,"option-label":"label","option-value":"value","show-clear":""},{filtericon:s(()=>[a(t(g),{icon:t(b)},null,8,["icon"])]),option:s(({option:r})=>[d("div",yt,[a(t(g),{icon:r.icon},null,8,["icon"]),d("span",null,h(r.label),1)])]),value:s(({value:r})=>[d("div",_t,[r&&m.value?(c(),y(_,{key:0},[a(t(g),{icon:m.value.icon||t(b)},null,8,["icon"]),d("span",null,h(m.value.label),1)],64)):(c(),y(_,{key:1},[a(t(g),{class:"text-gray-400",icon:t(b)},null,8,["icon"]),e[1]||(e[1]=d("span",{class:"text-slate-500"},"Filter op status",-1))],64))])]),_:1},8,["modelValue"]))}}),Lt={class:"flex flex-col gap-3 sm:flex-row"},xe=$({__name:"LocationsIndexPage",props:{profile:{}},setup(L){const u=tt(),{t:p}=ot(),m=V(""),n=V({query:"",state:null,page:1,perPage:5}),{data:e,refetch:r,isFetching:S,isLoading:C}=et(n,{includes:["images","createdBy"]}),{mutateAsync:I,isPending:F,variables:A}=at({onSuccess:async()=>{await r(),u.add({severity:"success",summary:p("domains.locations.success.statusUpdated"),detail:p("domains.locations.success.statusUpdatedDetail")})}}),{mutateAsync:B,isPending:U,variables:q}=it({onSuccess:async()=>{await r(),u.add({severity:"success",summary:p("domains.locations.success.deleted"),detail:p("domains.locations.success.deletedDetail")})}}),{data:N}=st(),T=P(()=>{var o;return p("pages.dashboard.locations.index.title",[nt((o=N.value)==null?void 0:o.locationCount)??"..."])}),R=mt(()=>{n.value.query=m.value,n.value.page=1},300);function H(o){var l;return F.value&&((l=A.value)==null?void 0:l.locationId)===o}function M(o){return U.value&&q.value===o}function Y(o){n.value.page=o.page+1}function j(o,l){I({locationId:o,state:l})}function E(o){B(o)}return(o,l)=>{const G=ct("RouterLink");return c(),f(ft,null,{default:s(()=>{var k,x,D;return[t(C)?(c(),f(vt,{key:0})):(c(),y(_,{key:1},[a(bt,{title:T.value},{actions:s(()=>[a(G,{to:{name:"locations.submit"}},{default:s(()=>[a(t(Q),{severity:"secondary"},{default:s(()=>[a(t(g),{icon:t(rt)},null,8,["icon"]),ut(" "+h(o.$t("pages.dashboard.locations.index.new")),1)]),_:1})]),_:1})]),metadata:s(()=>{var i,v,w;return[a(gt,{"current-count":(i=t(e))==null?void 0:i.data.length,"total-count":(v=t(e))==null?void 0:v.total,truncated:(w=t(e))==null?void 0:w.truncated,"empty-message":o.$t("pages.dashboard.locations.index.empty")},null,8,["current-count","total-count","truncated","empty-message"])]}),filters:s(()=>[d("div",Lt,[a(dt,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=i=>m.value=i),placeholder:o.$t("pages.dashboard.locations.index.search"),loading:t(S),onInput:t(R)},null,8,["modelValue","placeholder","loading","onInput"]),a(ht,{status:n.value.state,"onUpdate:status":l[1]||(l[1]=i=>n.value.state=i)},null,8,["status"])])]),_:1},8,["title"]),a(J,{locations:(k=t(e))==null?void 0:k.data,loading:t(C)},{item:s(({location:i})=>[a(z,{location:i,"action-is-pending":H(i.id),"delete-is-pending":M(i.id),"show-status-change":!0,"onClick:delete":v=>E(i.id),"onChange:state":j},null,8,["location","action-is-pending","delete-is-pending","onClick:delete"])]),_:1},8,["locations","loading"]),(D=(x=t(e))==null?void 0:x.data)!=null&&D.length?(c(),f(t(X),{key:0,first:t(e).perPage*(t(e).page-1),rows:t(e).perPage,"total-records":t(e).total,onPage:Y},null,8,["first","rows","total-records"])):pt("",!0)],64))]}),_:1})}}});export{xe as default};
