import{e as W,g as z,aE as K,aF as A,W as E,aG as R,aH as X,E as U,aI as Z,aJ as ee,_ as Y,s as te,h as ae,F as w,N as ne,o as se,aK as oe,aL as ie,aM as $,aN as le,aO as re,at as ue,a as Q,as as b,aP as ce,aQ as de,aR as L,aS as me,aT as fe}from"./index-BH2d3-5Q.js";import{L as P,r as H,a5 as ve,H as T,o as ye,a0 as Te,c as f,e as c,F as h,A as S,d as m,s as I,Y as r,t as O,C as M,q as ge,f as pe,a7 as G,a6 as J,y as _,p as N,J as xe,l as ke,a8 as F}from"./vue-Ch5H8NcK.js";import{f as De}from"./index-DyskoCvK.js";import{a as B,A as _e}from"./primevue-Ex1kWbwE.js";import{D as Ce}from"./useRouteDate-DMrgQeUU.js";const he={class:"calendar-container"},Se={class:"calendar-scroll-container"},Ie={class:"calendar-header"},we=["onClick"],Me={class:"text-sm font-medium md:text-xs"},Oe={ref:"calendarGridRef",class:"calendar-grid"},Ve={class:"time-column"},qe=["onClick"],Ee=P({__name:"Calendar",props:{currentWeek:{},timeSlots:{default:()=>[]},minDate:{},maxDate:{}},emits:["click:cell","click:day"],setup(e,{emit:a}){const s=e,t=a,{locale:n}=W(),i=H(new Date),l=ve("calendarBodyRef"),y=T(()=>{const o=z(s.currentWeek),d=K(o,6,"day");return A(o,d)}),x=T(()=>{const o=i.value;return(o.getHours()*60+o.getMinutes())/1440*100});function C(o){return!!(s.minDate&&o<s.minDate||s.maxDate&&o>s.maxDate)}function g(o){return s.timeSlots.filter(d=>X(d.day,o))}function p(o){const d=U(o.startTime),D=U(o.endTime)-d,v=R/60;return{top:`${d*v}px`,height:`${Math.max(D*v,20)}px`}}function k(o,d){if(C(o))return;const u=ee(d,0),D=Z(u,1);t("click:cell",{day:o,startTime:u,endTime:D})}function q(o){t("click:day",o)}return ye(()=>{const o=setInterval(()=>{i.value=new Date},1e3);Te(()=>clearInterval(o))}),(o,d)=>(m(),f("div",he,[c("div",Se,[c("div",Ie,[d[0]||(d[0]=c("div",null,null,-1)),(m(!0),f(h,null,S(y.value,(u,D)=>(m(),f("div",{key:D,class:I({today:r(E)(u)}),onClick:v=>q(u)},[c("div",Me,O(r(De)(u,"short",r(n))),1),c("div",{class:I(["mt-1 text-lg font-semibold md:text-base",{"today-indicator":r(E)(u)}])},O(u.getDate()),3)],10,we))),128))]),c("div",{ref_key:"calendarBodyRef",ref:l,class:"relative"},[c("div",Oe,[c("div",Ve,[(m(),f(h,null,S(24,u=>c("div",{key:u,class:"time-cell",style:M({height:r(R)+"px"})},O((u-1).toString().padStart(2,"0"))+":00 ",5)),64))]),(m(!0),f(h,null,S(y.value,(u,D)=>(m(),f("div",{key:D,class:"day-column"},[(m(),f(h,null,S(24,v=>c("div",{key:v,class:I(["day-cell",{disabled:C(u)}]),style:M({height:r(R)+"px"}),onClick:Fe=>k(u,v-1)},null,14,qe)),64)),(m(!0),f(h,null,S(g(u),v=>(m(),f("div",{key:v.id,class:"custom-time-slot",style:M(p(v))},[pe(o.$slots,"time-slot",{slot:v},void 0,!0)],4))),128)),r(E)(u)?(m(),f("div",{key:0,class:"pointer-events-none absolute right-0 left-0 z-20",style:M({top:`${x.value}%`})},[...d[1]||(d[1]=[c("div",{class:"flex items-center"},[c("div",{class:"-ml-1 h-2 w-2 rounded-full bg-red-500"}),c("div",{class:"h-0.5 flex-1 bg-red-500"})],-1)])],4)):ge("",!0)]))),128))],512)],512)])]))}}),Ue=Y(Ee,[["__scopeId","data-v-3a3e7604"]]);function j(e){const{day:a,startTime:s,endTime:t}=e;return{metadata:e,day:te(a),startTime:s,endTime:t}}function Be(e){return e.map(j)}function We(e){const a=e.filter(t=>!!t.repetition),s=e.filter(t=>!t.repetition).map(j);for(const t of a){const{startTime:n,endTime:i,repetition:l}=t,{selectedDays:y,endDate:x}=l,C=A(new Date,x).filter(g=>y.includes((g.getDay()+6)%7));for(const g of C)s.push({metadata:t,startTime:n,endTime:i,day:g})}return s}const Re={class:"space-y-4"},$e={class:"flex items-center justify-between"},Ne=P({__name:"CalendarControls",props:G({minDate:{},maxDate:{}},{date:{default:new Date,required:!0},dateModifiers:{}}),emits:["update:date"],setup(e){const a=J(e,"date"),{locale:s}=W(),t=H(!1),n=T(()=>z(a.value)),i=T(()=>ae(a.value)),l=T(()=>{const g=n.value,p=i.value,k=g.toLocaleDateString(s.value,{day:"numeric",month:"short"}),q=p.toLocaleDateString(s.value,{day:"numeric",month:"short"});return`${k} - ${q}`});function y(){t.value=!t.value}function x(){a.value=K(n.value,-1,"week")}function C(){a.value=K(n.value,1,"week")}return(g,p)=>(m(),f("div",Re,[c("div",$e,[_(r(B),{severity:"secondary",outlined:"",rounded:"",size:"small","aria-label":"Vorige week",onClick:x},{icon:N(()=>[_(r(w),{icon:r(ne)},null,8,["icon"])]),_:1}),_(Ce,{date:a.value,"onUpdate:date":p[0]||(p[0]=k=>a.value=k),"is-visible":t.value,"onUpdate:isVisible":p[1]||(p[1]=k=>t.value=k),"min-date":e.minDate,"max-date":e.maxDate},{toggle:N(()=>[c("button",{class:I(["toggle",{active:t.value}]),onClick:xe(y,["stop"])},[_(r(w),{icon:r(se),class:"text-xs text-gray-500"},null,8,["icon"]),c("span",null,O(l.value),1),_(r(w),{icon:r(oe),class:I(["text-xs text-gray-400 transition-all duration-200",{"rotate-180":t.value}])},null,8,["icon","class"])],2)]),_:1},8,["date","is-visible","min-date","max-date"]),_(r(B),{severity:"secondary",outlined:"",rounded:"",size:"small","aria-label":"Volgende week",onClick:C},{icon:N(()=>[_(r(w),{icon:r(ie)},null,8,["icon"])]),_:1})])]))}}),ze=Y(Ne,[["__scopeId","data-v-976fb22d"]]),Ae=P({__name:"TimeInput",props:G({minTime:{},maxTime:{},hourFormat:{default:"24"},stepMinutes:{default:re}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=e,s=J(e,"modelValue"),t=T({get:()=>$(s.value),set:l=>{s.value=le(l)}}),n=T(()=>a.minTime?$(a.minTime):void 0),i=T(()=>a.maxTime?$(a.maxTime):void 0);return(l,y)=>(m(),ke(r(_e),{modelValue:t.value,"onUpdate:modelValue":y[0]||(y[0]=x=>t.value=x),"min-date":n.value,"max-date":i.value,"hour-format":e.hourFormat,"step-minute":e.stepMinutes,"show-time":"","time-only":"",class:"w-full"},null,8,["modelValue","min-date","max-date","hour-format","step-minute"]))}}),V={all:e=>["location","opening-times",e],read:(e,a)=>["location","opening-times",e,a]};function Ye(e,a={}){const s=T(()=>F(e)!==null);return ue({queryKey:V.read(e,a),enabled:s,queryFn:()=>{const n=F(e),i=F(a);return ce(n,i)}})}function He(e={}){const a=Q();return b({...e,onSuccess:(t,n,i)=>{var l;a.invalidateQueries({queryKey:V.all(n.locationId)}),a.invalidateQueries({queryKey:L.read(n.locationId)}),(l=e.onSuccess)==null||l.call(e,t,n,i)},mutationFn:({locationId:t,openings:n})=>de(t,n)})}function Ge(e={}){const a=Q();return b({...e,onSuccess:(t,n,i)=>{var l;a.invalidateQueries({queryKey:V.all(n.locationId)}),a.invalidateQueries({queryKey:L.read(n.locationId)}),(l=e.onSuccess)==null||l.call(e,t,n,i)},mutationFn:({locationId:t,openingTimeId:n,opening:i,sequence:l})=>me(t,n,i,l)})}function Je(e={}){const a=Q();return b({...e,onSuccess:(t,n,i)=>{var l;a.invalidateQueries({queryKey:V.all(n.locationId)}),a.invalidateQueries({queryKey:L.read(n.locationId)}),(l=e.onSuccess)==null||l.call(e,t,n,i)},mutationFn:({locationId:t,openingTimeId:n,sequence:i})=>fe(t,n,i)})}export{Ue as C,Ae as _,ze as a,He as b,Ge as c,Je as d,We as o,Be as t,Ye as u};
