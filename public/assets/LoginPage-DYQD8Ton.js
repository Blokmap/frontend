import{u as L,_ as h,a as V}from"./auth-Dja2mZxx.js";import{S as w,r as $,c as g,d as o,x as i,l as r,L as s,I as S,F as f,z as I,b as d,k as F,f as _}from"./vue-Ct2aXI66.js";import{F as k,g as B,d as A,h as E,i as j,j as M}from"./index-3k3nbguw.js";import{g as y,f as b,s as v,j as N}from"./primevue-DmYSBaYr.js";import"./query-J9vOU-6z.js";const P={class:"grid grid-cols-1"},R={class:"grid grid-cols-1"},U={class:"my-4 grid grid-cols-1 gap-3"},q=["src","alt"],C=w({__name:"LoginForm",props:{idps:{},error:{},isLoading:{type:Boolean}},emits:["submit"],setup(x,{emit:l}){const m=l,n=$({username:"",password:""});function c(){m("submit",n.value)}return(u,e)=>(d(),g(f,null,[o("form",{class:"my-6 space-y-3",onSubmit:S(c,["prevent"])},[o("div",P,[i(s(b),{variant:"on"},{default:r(()=>[e[2]||(e[2]=o("label",{for:"username"},"Username or Email",-1)),i(s(y),{modelValue:n.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.username=t),id:"username",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[2]})]),o("div",R,[i(s(b),{variant:"on"},{default:r(()=>[e[3]||(e[3]=o("label",{for:"password"},"Password",-1)),i(s(y),{modelValue:n.value.password,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.password=t),id:"password",type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1,__:[3]})]),i(s(v),{class:"mt-3 w-full",label:"Log in with email",severity:"primary",type:"submit",loading:u.isLoading},{icon:r(()=>[i(s(k),{icon:s(B)},null,8,["icon"])]),_:1},8,["loading"])],32),o("div",U,[(d(!0),g(f,null,I(u.idps,t=>(d(),F(s(v),{key:t.name,class:"w-full",severity:"secondary",label:`Log in with ${t.name}`},{icon:r(()=>[o("img",{src:t.logo,alt:t.name,class:"h-5 w-5 object-contain"},null,8,q)]),_:2},1032,["label"]))),128))])],64))}}),z={class:"flex items-start gap-8"},O={class:"basis-3/5"},T={class:"basis-2/5"},Q=w({__name:"LoginPage",setup(x){A();const{showMessage:l}=E(),m=j(),{data:n,isLoading:c}=L(),{login:u,loginIsLoading:e,loginError:t}=M({onError:p=>{var a;l({severity:"error",summary:"An error occurred",detail:(a=p.response)==null?void 0:a.data})},onSuccess:()=>{m.push({name:"home"}),l({severity:"success",summary:"Login Successful",detail:"Successfully logged in."})}});return(p,a)=>(d(),g("div",z,[o("div",O,[a[0]||(a[0]=o("h2",{class:"text-color my-6 text-xl font-semibold"},[o("span",{class:"text-secondary font-bold"},"Log in"),_(" through your institution ")],-1)),i(h,{institutions:s(n),"is-loading":s(c)},null,8,["institutions","is-loading"])]),i(s(N),{layout:"vertical",align:"center",class:"mx-0 self-stretch"},{default:r(()=>a[1]||(a[1]=[o("span",{class:"text-sm font-bold"},"OR",-1)])),_:1,__:[1]}),o("div",T,[a[2]||(a[2]=o("h2",{class:"text-color my-6 text-xl font-semibold"},[o("span",{class:"text-secondary font-bold"},"Log in"),_(" in without institution ")],-1)),i(C,{idps:s(V),error:s(t),"is-loading":s(e),onSubmit:s(u)},null,8,["idps","error","is-loading","onSubmit"])])]))}});export{Q as default};
