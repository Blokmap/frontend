import{M as oe,r as M,I as $,o as re,Z as ie,c as S,d as v,F as z,z as B,b as h,q as N,N as f,t as A,p as le,k as Me,l as W,B as ne,e as Se,C as ue,x as b,J as H,D as Ce,f as _e,a9 as ae}from"./vue-Sv2pE2s2.js";import{k as ce,_ as de,F,m as xe,a4 as Ee,a5 as Pe,a6 as be}from"./index-7bbMbo5P.js";import{a as X,g as $e}from"./primevue-Dphh8M7u.js";function me(e){const t=e.getDay(),n=e.getDate()-t+(t===0?-6:1);return new Date(e.setDate(n))}function Qe(e){const t=e.getDay(),n=e.getDate()-t+(t===0?0:7);return new Date(e.setDate(n))}function Ie(e,t){const n=[],o=new Date(e);for(;o<=t;){const p=new Date(o);n.push(p),o.setDate(o.getDate()+1)}return n}function et(e,t,n="day"){const o=new Date(e);switch(n){case"day":o.setDate(o.getDate()+t);break;case"week":o.setDate(o.getDate()+t*7);break;case"month":o.setMonth(o.getMonth()+t);break}return o}function tt(e,t,n){return e>=t&&e<=n}function nt(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function Le(e,t="short",n="en"){return e.toLocaleDateString(n,{weekday:t})}function U(e){const t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function We(e){const t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0");return`${t}:${n}`}function j(e,t=new Date("2000-01-01")){const[n,o]=e.split(":").map(Number),p=new Date(t);return p.setHours(n,o,0,0),p}function at(e,t){const n=(t.getTime()-e.getTime())/6e4,o=Math.floor(n/60),p=n%60;return{hours:o,minutes:p}}function L(e){if(e.includes("AM")||e.includes("PM")){const o=e.replace(/\s*(AM|PM)/i,""),[p,g]=o.split(":");let k=parseInt(p);const y=parseInt(g)||0,u=e.includes("PM");return u&&k!==12?k+=12:!u&&k===12&&(k=0),{hours:k,minutes:y}}const[t,n]=e.split(":").map(Number);return{hours:t,minutes:n}}function V(e,t){return e*60+t}function se(e){const t=Math.floor(e/60),n=e%60;return{hours:t,minutes:n}}function Y(e,t){return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}function Ne(e,t){const n=j(e);return n.setHours(n.getHours()+t),We(n)}function Re(e,t){const n=j(e),o=j(t);return n.getTime()-o.getTime()}function st(e,t){return Re(t,e)<=0?{startTime:e,endTime:Ne(e,1)}:{startTime:e,endTime:t}}const ze={class:"calendar-container"},Be={class:"calendar-scroll-container"},Fe={class:"calendar-header"},Ve=["onClick"],Ye={class:"day-header-name"},Ae={class:"time-periods-grid"},Oe={class:"time-column"},He=["onClick"],Xe=["onMousedown"],Ue=oe({__name:"Calendar",props:{currentWeek:{},timeSlots:{default:()=>[]},minDate:{default:void 0},maxDate:{default:void 0}},emits:["click:time-slot","click:day","drag:slot"],setup(e,{emit:t}){const n=e,o=t,{locale:p}=ce(),g=M(0),k=M(new Date),y=M(),u=M(!1),c=M(null),_=M(0),R=M(0),D=M("move"),x=M(0),E=M(0),r=M(null),l=M(null),P=$(()=>{const a=me(n.currentWeek),s=new Date(a);return s.setDate(a.getDate()+6),Ie(a,s)}),I=$(()=>Array.from({length:24},(a,s)=>`${s.toString().padStart(2,"0")}:00`)),ve=$(()=>{const a=k.value;return(a.getHours()*60+a.getMinutes())/1440*100});re(()=>{g.value=setInterval(()=>{k.value=new Date},1e3),setTimeout(De,100)}),ie(()=>{g.value&&clearInterval(g.value)});const q=a=>!!(n.minDate&&a<n.minDate||n.maxDate&&a>n.maxDate),fe=a=>n.timeSlots.filter(s=>s.day.toDateString()===a.toDateString()),ge=a=>{const s=L(a.startTime),i=L(a.endTime),w=V(s.hours,s.minutes),T=V(i.hours,i.minutes)-w,m=50/60;return{top:`${w*m}px`,height:`${Math.max(T*m,20)}px`}},pe=(a,s=15)=>Math.round(a/s)*s;function De(){if(!y.value)return;const a=new Date,i=(a.getHours()*60+a.getMinutes())/60*50;y.value.scrollTo({top:Math.max(0,i-100),behavior:"smooth"})}function ke(a,s){q(a)||o("click:time-slot",{day:a,time:s})}function he(a){o("click:day",a)}function ye(a,s){a.preventDefault(),a.stopPropagation(),u.value=!0,c.value=s,_.value=a.clientY,R.value=a.clientX;const w=a.target.getBoundingClientRect(),d=a.clientY-w.top>w.height-10;D.value=d?"resize":"move";const T=L(s.startTime),m=L(s.endTime);x.value=V(T.hours,T.minutes),E.value=V(m.hours,m.minutes),r.value=new Date(s.day),l.value=new Date(s.day),document.addEventListener("mousemove",K),document.addEventListener("mouseup",G)}function K(a){if(!u.value||!c.value||!y.value)return;const s=a.clientY-_.value,i=50/60,w=Math.round(s/i),d=pe(w,15);let T=r.value;if(D.value==="move"){const Q=y.value.querySelector(".time-periods-grid");if(Q){const ee=Q.getBoundingClientRect(),te=80,we=(ee.width-te)/7,Te=a.clientX-ee.left-te,O=Math.floor(Te/we);O>=0&&O<P.value.length&&(T=P.value[O],l.value=T)}}let m=x.value,C=E.value;D.value==="move"?(m=x.value+d,C=E.value+d):(C=E.value+d,C<=m&&(C=m+15)),m=Math.max(0,Math.min(1425,m)),C=Math.max(15,Math.min(1440,C)),C<=m&&(D.value==="move"?C=m+(E.value-x.value):C=m+15);const J=se(m),Z=se(C);c.value.startTime=Y(J.hours,J.minutes),c.value.endTime=Y(Z.hours,Z.minutes),T&&(c.value.day=T)}function G(){if(!u.value||!c.value)return;const a=L(c.value.startTime),s=L(c.value.endTime),i=Y(a.hours,a.minutes),w=Y(s.hours,s.minutes),d=l.value&&r.value&&l.value.toDateString()!==r.value.toDateString()?l.value:void 0;o("drag:slot",c.value,i,w,d),u.value=!1,c.value=null,D.value="move",r.value=null,l.value=null,document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",G)}return(a,s)=>(h(),S("div",ze,[v("div",Be,[v("div",Fe,[s[0]||(s[0]=v("div",null,null,-1)),(h(!0),S(z,null,B(P.value,(i,w)=>(h(),S("div",{key:w,class:N({today:f(U)(i)}),onClick:d=>he(i)},[v("div",Ye,A(f(Le)(i,"short",f(p))),1),v("div",{class:N(["day-header-number",{"today-indicator":f(U)(i)}])},A(i.getDate()),3)],10,Ve))),128))]),v("div",{ref_key:"calendarBodyRef",ref:y,class:"calendar-body"},[v("div",Ae,[v("div",Oe,[(h(!0),S(z,null,B(I.value,i=>(h(),S("div",{key:i,class:"time-period"},A(i),1))),128))]),(h(!0),S(z,null,B(P.value,(i,w)=>(h(),S("div",{key:w,class:"day-column"},[(h(!0),S(z,null,B(I.value,d=>(h(),S("div",{key:d,class:N(["time-period-cell",{disabled:q(i)}]),onClick:T=>ke(i,d)},null,10,He))),128)),(h(!0),S(z,null,B(fe(i),d=>(h(),Me(ue,{key:d.id,name:"slide-up",appear:""},{default:W(()=>{var T,m;return[v("div",{class:N(["custom-time-slot",{dragging:u.value&&((T=c.value)==null?void 0:T.id)===d.id,"resize-mode":u.value&&((m=c.value)==null?void 0:m.id)===d.id&&D.value==="resize"}]),style:ne(ge(d)),onMousedown:C=>ye(C,d)},[Se(a.$slots,"time-slot",{slot:d},void 0,!0),s[1]||(s[1]=v("div",{class:"resize-handle"},null,-1))],46,Xe)]}),_:2},1024))),128)),f(U)(i)?(h(),S("div",{key:0,class:"current-time-indicator",style:ne({top:`${ve.value}%`})},s[2]||(s[2]=[v("div",{class:"time-line"},[v("div",{class:"time-dot"}),v("div",{class:"time-line-bar"})],-1)]),4)):le("",!0)]))),128))])],512)])]))}}),ot=de(Ue,[["__scopeId","data-v-d3497302"]]),je={class:"relative flex items-center gap-2"},qe={class:"flex justify-end border-t-1 border-gray-200 pt-3"},Ke=oe({__name:"CalendarControls",props:{currentWeek:{},minDate:{},maxDate:{}},emits:["click:previous-week","click:next-week","click:current-week","select:date"],setup(e,{emit:t}){const n=e,o=t,{locale:p}=ce(),g=M(!1),k=$(()=>me(n.currentWeek)),y=$(()=>{const r=new Date(k.value);return r.setDate(r.getDate()+6),r}),u=$(()=>{const r=k.value,l=y.value,P=r.toLocaleDateString(p.value,{day:"numeric",month:"short"}),I=l.toLocaleDateString(p.value,{day:"numeric",month:"short"});return`${P} - ${I}`}),c=$(()=>{if(!n.currentWeek)return!1;const r=new Date,l=new Date(r.getFullYear(),r.getMonth(),r.getDate()),P=k.value.getTime(),I=y.value.getTime();return l.getTime()<P||l.getTime()>I});function _(){o("click:previous-week")}function R(){o("click:next-week")}function D(r){r&&r instanceof Date&&(g.value=!1,o("select:date",r))}function x(){g.value=!g.value}function E(){g.value=!1,o("click:current-week")}return(r,l)=>(h(),S("div",{class:"space-y-4",onClick:l[2]||(l[2]=P=>g.value=!1)},[v("div",{class:"flex items-center justify-between",onClick:l[1]||(l[1]=H(()=>{},["stop"]))},[b(f(X),{onClick:_,severity:"secondary",outlined:"",rounded:"",size:"small","aria-label":"Vorige week"},{icon:W(()=>[b(f(F),{icon:f(Pe)},null,8,["icon"])]),_:1}),v("div",je,[v("button",{onClick:H(x,["stop"]),class:N(["date-picker-toggle",{"date-picker-toggle--active":g.value}])},[b(f(F),{icon:f(xe),class:"text-xs text-gray-500"},null,8,["icon"]),v("span",null,A(u.value),1),b(f(F),{icon:f(Ee),class:N(["text-xs text-gray-400 transition-all duration-200",{"rotate-180":g.value}])},null,8,["icon","class"])],2),b(ue,{name:"slide-down"},{default:W(()=>[g.value?(h(),S("div",{key:0,onClick:l[0]||(l[0]=H(()=>{},["stop"])),class:"date-picker-overlay"},[b(f($e),{"model-value":n.currentWeek,locale:f(p),"min-date":r.minDate,"max-date":r.maxDate,"onUpdate:modelValue":D,inline:""},Ce({_:2},[c.value?{name:"footer",fn:W(()=>[v("div",qe,[b(f(X),{onClick:E,severity:"primary",size:"small",class:"transition-all duration-200"},{default:W(()=>l[3]||(l[3]=[_e(" Vandaag ")])),_:1,__:[3]})])]),key:"0"}:void 0]),1032,["model-value","locale","min-date","max-date"])])):le("",!0)]),_:1})]),b(f(X),{onClick:R,severity:"secondary",outlined:"",rounded:"",size:"small","aria-label":"Volgende week"},{icon:W(()=>[b(f(F),{icon:f(be)},null,8,["icon"])]),_:1})])]))}}),rt=de(Ke,[["__scopeId","data-v-286669d7"]]);function it(e={},t={}){const{enabled:n=!0,preventDefault:o=!0}=t,p=ae(n);ae(o);const g={...e},k=$(()=>{const u=new Map;return Object.entries(g).forEach(([c,_])=>{(Array.isArray(_.keys)?_.keys:[_.keys]).forEach(D=>{u.has(D)||u.set(D,[]),u.get(D).push(c)})}),u}),y=u=>{if(!p.value)return;const c=document.activeElement;if(c&&["INPUT","TEXTAREA","SELECT"].includes(c.tagName))return;const D=k.value.get(u.key);if(!D||D.length===0)return;let x=!1;D.forEach(E=>{const r=g[E];r!=null&&r.callback&&(r.callback(),x=!0)}),x&&o&&u.preventDefault()};re(()=>{document.addEventListener("keydown",y)}),ie(()=>{document.removeEventListener("keydown",y)})}export{rt as C,me as a,ot as b,at as c,We as d,Qe as e,et as f,Y as g,Ne as h,tt as i,L as p,nt as s,j as t,it as u,st as v};
