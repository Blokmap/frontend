import{o as f,h as c,n as H,a as V,p as Y,q as J,r as W,g as K}from"./primevue-Ex1kWbwE.js";import{L as $,r as C,c as v,J as N,y as o,e as s,Y as e,p as r,d as w,H as I,t as d,q as A,F as y,A as O}from"./vue-Ch5H8NcK.js";import{F as x,A as L,e as Q,u as X,a4 as Z,a5 as ee,S as te,a6 as oe,a7 as se,v as ae,a8 as ie}from"./index-BH2d3-5Q.js";import{u as re}from"./useInstitutions-Czrf_pHc.js";import"@primeuix/styled";import"@primeuix/utils";import"@primeuix/utils/object";import"@primeuix/styles/base";import"@primeuix/utils/dom";import"@primeuix/utils/zindex";import"@primeuix/styles/toast";import"@primeuix/styles/accordion";import"@primeuix/utils/uuid";import"@primeuix/styles/chip";import"@primeuix/styles/autocomplete";import"@primeuix/styles/avatar";import"@primeuix/styles/blockui";import"@primeuix/styles/breadcrumb";import"@primeuix/styles/buttongroup";import"@primeuix/styles/datepicker";import"@primeuix/styles/card";import"@primeuix/styles/carousel";import"@primeuix/styles/cascadeselect";import"@primeuix/styles/checkbox";import"@primeuix/styles/checkboxgroup";import"@primeuix/styles/inputchips";import"@primeuix/styles/colorpicker";import"@primeuix/utils/eventbus";import"@primeuix/styles/dialog";import"@primeuix/styles/confirmdialog";import"@primeuix/styles/confirmpopup";import"@primeuix/styles/contextmenu";import"@primeuix/styles/paginator";import"@primeuix/styles/iconfield";import"@primeuix/styles/inputtext";import"@primeuix/styles/virtualscroller";import"@primeuix/styles/select";import"@primeuix/styles/inputnumber";import"@primeuix/styles/datatable";import"@primeuix/styles/radiobutton";import"@primeuix/styles/dataview";import"@primeuix/styles/divider";import"@primeuix/styles/dock";import"@primeuix/styles/tooltip";import"@primeuix/styles/drawer";import"@primeuix/styles/fieldset";import"@primeuix/styles/badge";import"@primeuix/styles/button";import"@primeuix/styles/message";import"@primeuix/styles/progressbar";import"@primeuix/styles/fileupload";import"@primeuix/styles/floatlabel";import"@primeuix/styles/galleria";import"@primeuix/styles/iftalabel";import"@primeuix/styles/image";import"@primeuix/styles/imagecompare";import"@primeuix/styles/inlinemessage";import"@primeuix/styles/inplace";import"@primeuix/styles/inputgroup";import"@primeuix/styles/inputotp";import"@primeuix/styles/toggleswitch";import"@primeuix/styles/knob";import"@primeuix/styles/listbox";import"@primeuix/styles/megamenu";import"@primeuix/styles/menu";import"@primeuix/styles/menubar";import"@primeuix/styles/metergroup";import"@primeuix/styles/multiselect";import"@primeuix/styles/orderlist";import"@primeuix/styles/organizationchart";import"@primeuix/styles/overlaybadge";import"@primeuix/styles/popover";import"@primeuix/styles/panel";import"@primeuix/styles/panelmenu";import"@primeuix/styles/password";import"@primeuix/styles/picklist";import"@primeuix/styles/progressspinner";import"@primeuix/styles/radiobuttongroup";import"@primeuix/styles/rating";import"@primeuix/styles/scrollpanel";import"@primeuix/styles/scrolltop";import"@primeuix/styles/togglebutton";import"@primeuix/styles/selectbutton";import"@primeuix/styles/skeleton";import"@primeuix/styles/slider";import"@primeuix/styles/speeddial";import"@primeuix/styles/tieredmenu";import"@primeuix/styles/splitbutton";import"@primeuix/styles/splitter";import"@primeuix/styles/stepper";import"@primeuix/styles/steps";import"@primeuix/styles/ripple";import"@primeuix/styles/tabmenu";import"@primeuix/styles/tabs";import"@primeuix/styles/tabview";import"@primeuix/styles/tag";import"@primeuix/styles/terminal";import"@primeuix/styles/textarea";import"@primeuix/styles/timeline";import"@primeuix/styles/toolbar";import"@primeuix/styles/tree";import"@primeuix/styles/treeselect";import"@primeuix/styles/treetable";const le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-3%200%20262%20262'%20xmlns='http://www.w3.org/2000/svg'%20preserveAspectRatio='xMidYMid'%3e%3cpath%20d='M255.878%20133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45%2012.04-9.283%2030.172-26.69%2042.356l-.244%201.622%2038.755%2030.023%202.685.268c24.659-22.774%2038.875-56.282%2038.875-96.027'%20fill='%234285F4'/%3e%3cpath%20d='M130.55%20261.1c35.248%200%2064.839-11.605%2086.453-31.622l-41.196-31.913c-11.024%207.688-25.82%2013.055-45.257%2013.055-34.523%200-63.824-22.773-74.269-54.25l-1.531.13-40.298%2031.187-.527%201.465C35.393%20231.798%2079.49%20261.1%20130.55%20261.1'%20fill='%2334A853'/%3e%3cpath%20d='M56.281%20156.37c-2.756-8.123-4.351-16.827-4.351-25.82%200-8.994%201.595-17.697%204.206-25.82l-.073-1.73L15.26%2071.312l-1.335.635C5.077%2089.644%200%20109.517%200%20130.55s5.077%2040.905%2013.925%2058.602l42.356-32.782'%20fill='%23FBBC05'/%3e%3cpath%20d='M130.55%2050.479c24.514%200%2041.05%2010.589%2050.479%2019.438l36.844-35.974C195.245%2012.91%20165.798%200%20130.55%200%2079.49%200%2035.393%2029.301%2013.925%2071.947l42.211%2032.783c10.59-31.477%2039.891-54.251%2074.414-54.251'%20fill='%23EB4335'/%3e%3c/svg%3e",ne=[{id:"google",name:"Google",logo:le}],me={class:"mt-5 mb-4 flex items-center gap-2",for:"remember"},ue=$({__name:"LoginForm",props:{error:{},isLoading:{type:Boolean}},emits:["submit"],setup(b,{emit:g}){const m=g,a=C({username:"",password:"",remember:!1});function u(){m("submit",a.value)}return(h,t)=>(w(),v("form",{class:"space-y-3",onSubmit:N(u,["prevent"])},[o(e(f),{variant:"on"},{default:r(()=>[t[3]||(t[3]=s("label",{for:"username"},"Username or Email",-1)),o(e(c),{id:"username",modelValue:a.value.username,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.username=l),class:"w-full",required:""},null,8,["modelValue"])]),_:1}),o(e(f),{variant:"on"},{default:r(()=>[t[4]||(t[4]=s("label",{for:"password"},"Password",-1)),o(e(c),{id:"password",modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.password=l),type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1}),s("label",me,[o(e(H),{modelValue:a.value.remember,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.remember=l),"input-id":"remember",binary:""},null,8,["modelValue"]),t[5]||(t[5]=s("span",{class:"text-md"},"Ik wil ingelogd blijven op dit apparaat",-1))]),o(e(V),{class:"mt-2 w-full",label:"Log in with email",severity:"primary",type:"submit",loading:b.isLoading},{icon:r(()=>[o(e(x),{icon:e(L)},null,8,["icon"])]),_:1},8,["loading"])],32))}}),pe={class:"grid grid-cols-2 gap-3"},de={class:"grid grid-cols-1 gap-3"},ce={class:"grid grid-cols-2 gap-3"},ge=$({__name:"RegisterForm",props:{error:{},isLoading:{type:Boolean}},emits:["submit"],setup(b,{emit:g}){const m=g,a=C({firstName:"",lastName:"",email:"",username:"",password:"",passwordConfirmation:""});function u(){m("submit",a.value)}return(h,t)=>(w(),v("form",{class:"space-y-3",onSubmit:N(u,["prevent"])},[s("div",pe,[o(e(f),{variant:"on"},{default:r(()=>[t[6]||(t[6]=s("label",{for:"first-name"},"First Name",-1)),o(e(c),{id:"first-name",modelValue:a.value.firstName,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.firstName=l),class:"w-full",required:""},null,8,["modelValue"])]),_:1}),o(e(f),{variant:"on"},{default:r(()=>[t[7]||(t[7]=s("label",{for:"last-name"},"Last Name",-1)),o(e(c),{id:"last-name",modelValue:a.value.lastName,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.lastName=l),class:"w-full",required:""},null,8,["modelValue"])]),_:1})]),s("div",de,[o(e(f),{variant:"on"},{default:r(()=>[t[8]||(t[8]=s("label",{for:"email"},"Email",-1)),o(e(c),{id:"email",modelValue:a.value.email,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.email=l),type:"email",class:"w-full",required:""},null,8,["modelValue"])]),_:1}),o(e(f),{variant:"on"},{default:r(()=>[t[9]||(t[9]=s("label",{for:"username"},"Username",-1)),o(e(c),{id:"username",modelValue:a.value.username,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.username=l),class:"w-full",required:""},null,8,["modelValue"])]),_:1})]),s("div",ce,[o(e(f),{variant:"on"},{default:r(()=>[t[10]||(t[10]=s("label",{for:"password"},"Password",-1)),o(e(c),{id:"password",modelValue:a.value.password,"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.password=l),type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1}),o(e(f),{variant:"on"},{default:r(()=>[t[11]||(t[11]=s("label",{for:"confirm-password"},"Confirm Password",-1)),o(e(c),{id:"confirm-password",modelValue:a.value.passwordConfirmation,"onUpdate:modelValue":t[5]||(t[5]=l=>a.value.passwordConfirmation=l),type:"password",class:"w-full",required:""},null,8,["modelValue"])]),_:1})]),o(e(V),{class:"mt-3 w-full",label:"Continue with email",severity:"primary",type:"submit",loading:b.isLoading},{icon:r(()=>[o(e(x),{icon:e(L)},null,8,["icon"])]),_:1},8,["loading"])],32))}}),fe={ref:"title",class:"text-bold text-center text-4xl"},ve={class:"font-bold text-slate-700"},we={class:"text-md mt-1 max-w-80 text-center text-slate-500"},he={class:"flex items-center gap-2"},be=["alt","src"],ye={class:"flex flex-col"},Ve={class:"text-sm font-bold"},xe={class:"text-sm text-gray-400"},_e={key:0,class:"text-sm font-bold text-slate-600"},$e={class:"text-gray-500"},Ce=["href"],Le=["src","alt"],Se={class:"absolute right-4 bottom-4"},Fe={class:"hover:underline"},Ue={class:"text-lg font-bold"},Lo=$({__name:"AuthPage",setup(b){const{locale:g,t:m}=Q(),a=X(),u=ae(),h=te(),{data:t,isLoading:l}=re({}),{mutate:R,isPending:q,error:B}=Z({onError:i=>{var p;a.add({severity:"error",summary:m("domains.auth.errors.loginFailed"),detail:(p=i.response)==null?void 0:p.data})},onSuccess:()=>{const i=ie();i?u.push({path:i.toString()}):u.push({name:"locations"}),a.add({severity:"success",summary:m("domains.auth.success.loggedIn"),detail:m("domains.auth.success.loggedInDetail")})}}),{mutate:M,isPending:E,error:P}=ee({onError:i=>{var p;a.add({severity:"error",summary:m("domains.auth.errors.registerFailed"),detail:(p=i.response)==null?void 0:p.data})},onSuccess:()=>{a.add({severity:"success",summary:m("domains.auth.success.registered"),detail:m("domains.auth.success.registeredDetail")}),u.push({name:"auth",params:{action:"login"}})}}),_=C(""),D=I(()=>!!h.params.action),G=I(()=>t.value?t.value.data.filter(i=>{var U,k;const p=((U=i.slug)==null?void 0:U.toLowerCase().trim())||"",n=((k=i.name[g.value])==null?void 0:k.toLowerCase().trim())||"",F=_.value.toLowerCase();return p.includes(F)||n.includes(F)}):[]);function T(i){i.value}function j(){u.push({name:"auth"})}function S(){u.push({name:"auth",params:{action:"login"}})}function z(){u.push({name:"auth",params:{action:"register"}})}return(i,p)=>(w(),v(y,null,[s("h1",fe,[s("span",ve,d(i.$t("pages.auth.title")),1)],512),s("p",we,d(i.$t("pages.auth.subtitle")),1),o(e(W),{class:"my-2"},{default:r(()=>[o(e(Y),null,{default:r(()=>[o(e(x),{icon:e(oe),class:"text-slate-500"},null,8,["icon"])]),_:1}),o(e(J),{class:"!w-[300px] py-1 ps-6",placeholder:i.$t("pages.auth.institution.select"),"pt:overlay:class":"!w-[300px] w-full","pt:list-container:class":"p-0",options:G.value,loading:e(l),onChange:T},{header:r(()=>[o(e(c),{modelValue:_.value,"onUpdate:modelValue":p[0]||(p[0]=n=>_.value=n),placeholder:i.$t("pages.auth.institution.search"),class:"w-full border-0"},null,8,["modelValue","placeholder"])]),option:r(({option:n})=>[s("div",he,[s("img",{alt:n.name,src:n.logo.url,class:"h-10 w-10 object-contain"},null,8,be),s("div",ye,[s("p",Ve,d(n.slug[e(g)]),1),s("p",xe,d(n.name[e(g)]),1)])])]),value:r(({value:n})=>[n?(w(),v("p",_e,d(n.name[e(g)]),1)):A("",!0)]),empty:r(()=>[s("span",$e,d(i.$t("pages.auth.institution.noMatch")),1)]),_:1},8,["placeholder","options","loading"])]),_:1}),(w(!0),v(y,null,O(e(ne),n=>(w(),v("a",{key:n.name,href:"/api/"+e(se).auth.sso.replace("{provider}",n.id)},[o(e(V),{class:"w-[300px]",severity:"contrast",size:"small",label:i.$t("pages.auth.actions.loginWith",[n.name])},{icon:r(()=>[s("img",{src:n.logo,alt:n.name,class:"h-5 w-5 object-contain"},null,8,Le)]),_:2},1032,["label"])],8,Ce))),128)),s("div",Se,[o(e(V),{severity:"secondary",size:"small",link:"",onClick:S},{default:r(()=>[s("span",Fe,d(i.$t("pages.auth.actions.loginPassword")),1),o(e(x),{icon:e(L)},null,8,["icon"])]),_:1})]),o(e(K),{class:"w-[500px]",visible:D.value,modal:"","onUpdate:visible":j},{header:r(()=>[s("h2",Ue,d(e(h).params.action==="register"?i.$t("pages.auth.actions.register"):i.$t("pages.auth.actions.login")),1)]),default:r(()=>[e(h).params.action==="login"?(w(),v(y,{key:0},[o(ue,{"is-loading":e(q),error:e(B),onSubmit:e(R)},null,8,["is-loading","error","onSubmit"]),s("span",{class:"mt-4 block cursor-pointer text-center hover:underline",onClick:z},d(i.$t("pages.auth.actions.noAccount")),1)],64)):e(h).params.action==="register"?(w(),v(y,{key:1},[o(ge,{"is-loading":e(E),error:e(P),onSubmit:e(M)},null,8,["is-loading","error","onSubmit"]),s("span",{class:"mt-4 block cursor-pointer text-center hover:underline",onClick:S},d(i.$t("pages.auth.actions.hasAccount")),1)],64)):A("",!0)]),_:1},8,["visible"])],64))}});export{Lo as default};
