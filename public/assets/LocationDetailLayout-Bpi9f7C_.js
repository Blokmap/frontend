import{L as V,H as b,ag as B,c as y,y as i,l as d,p as a,Y as o,F as w,e,i as j,q as E,h as k,D as h,T as A,d as m}from"./vue-Ch5H8NcK.js";import{a as I,t as J,v as P,w as u}from"./primevue-Ex1kWbwE.js";import{D as H}from"./DashboardContent-C7GZlxZW.js";import{_ as q,D as G}from"./DashboardPageHeader-DlEF0Y-P.js";import{_ as M}from"./DashboardNotFound.vue_vue_type_script_setup_true_lang-CNi6UBhB.js";import{u as Q,S as W,Q as Y,a9 as K,aa as X,F as r,ab as Z,ac as tt,T as ot,ad as it,ae as at,af as et,ag as st,z as nt,d as rt,v as mt,_ as lt}from"./index-BH2d3-5Q.js";import{u as pt}from"./useLocationEditing-Dl2vaYTn.js";import"@primeuix/styled";import"@primeuix/utils";import"@primeuix/utils/object";import"@primeuix/styles/base";import"@primeuix/utils/dom";import"@primeuix/utils/zindex";import"@primeuix/styles/toast";import"@primeuix/styles/accordion";import"@primeuix/utils/uuid";import"@primeuix/styles/chip";import"@primeuix/styles/autocomplete";import"@primeuix/styles/avatar";import"@primeuix/styles/blockui";import"@primeuix/styles/breadcrumb";import"@primeuix/styles/buttongroup";import"@primeuix/styles/datepicker";import"@primeuix/styles/card";import"@primeuix/styles/carousel";import"@primeuix/styles/cascadeselect";import"@primeuix/styles/checkbox";import"@primeuix/styles/checkboxgroup";import"@primeuix/styles/inputchips";import"@primeuix/styles/colorpicker";import"@primeuix/utils/eventbus";import"@primeuix/styles/dialog";import"@primeuix/styles/confirmdialog";import"@primeuix/styles/confirmpopup";import"@primeuix/styles/contextmenu";import"@primeuix/styles/paginator";import"@primeuix/styles/iconfield";import"@primeuix/styles/inputtext";import"@primeuix/styles/virtualscroller";import"@primeuix/styles/select";import"@primeuix/styles/inputnumber";import"@primeuix/styles/datatable";import"@primeuix/styles/radiobutton";import"@primeuix/styles/dataview";import"@primeuix/styles/divider";import"@primeuix/styles/dock";import"@primeuix/styles/tooltip";import"@primeuix/styles/drawer";import"@primeuix/styles/fieldset";import"@primeuix/styles/badge";import"@primeuix/styles/button";import"@primeuix/styles/message";import"@primeuix/styles/progressbar";import"@primeuix/styles/fileupload";import"@primeuix/styles/floatlabel";import"@primeuix/styles/galleria";import"@primeuix/styles/iftalabel";import"@primeuix/styles/image";import"@primeuix/styles/imagecompare";import"@primeuix/styles/inlinemessage";import"@primeuix/styles/inplace";import"@primeuix/styles/inputgroup";import"@primeuix/styles/inputotp";import"@primeuix/styles/toggleswitch";import"@primeuix/styles/knob";import"@primeuix/styles/listbox";import"@primeuix/styles/megamenu";import"@primeuix/styles/menu";import"@primeuix/styles/menubar";import"@primeuix/styles/metergroup";import"@primeuix/styles/multiselect";import"@primeuix/styles/orderlist";import"@primeuix/styles/organizationchart";import"@primeuix/styles/overlaybadge";import"@primeuix/styles/popover";import"@primeuix/styles/panel";import"@primeuix/styles/panelmenu";import"@primeuix/styles/password";import"@primeuix/styles/picklist";import"@primeuix/styles/progressspinner";import"@primeuix/styles/radiobuttongroup";import"@primeuix/styles/rating";import"@primeuix/styles/scrollpanel";import"@primeuix/styles/scrolltop";import"@primeuix/styles/togglebutton";import"@primeuix/styles/selectbutton";import"@primeuix/styles/skeleton";import"@primeuix/styles/slider";import"@primeuix/styles/speeddial";import"@primeuix/styles/tieredmenu";import"@primeuix/styles/splitbutton";import"@primeuix/styles/splitter";import"@primeuix/styles/stepper";import"@primeuix/styles/steps";import"@primeuix/styles/ripple";import"@primeuix/styles/tabmenu";import"@primeuix/styles/tabs";import"@primeuix/styles/tabview";import"@primeuix/styles/tag";import"@primeuix/styles/terminal";import"@primeuix/styles/textarea";import"@primeuix/styles/timeline";import"@primeuix/styles/toolbar";import"@primeuix/styles/tree";import"@primeuix/styles/treeselect";import"@primeuix/styles/treetable";import"./helpers-BZBkp5df.js";import"./helpers-CQSRa6mq.js";const ct={class:"tabs-wrapper"},dt={class:"tab-content"},ut={key:0,class:"save-bar"},gt={class:"flex items-center justify-between"},ft={class:"flex items-center font-medium"},vt={class:"flex"},bt=V({__name:"LocationDetailLayout",props:{locationId:{},profile:{}},setup(C){const p=C,f=Q(),x=mt(),D=W(),n=pt(),S=b(()=>{var t;const s=((t=D.name)==null?void 0:t.toString())||"";return s.includes("reservations")?"reservations":s.includes("openings")?"openings":s.includes("images")?"images":s.includes("settings")?"settings":"info"}),{data:l,isLoading:$,error:T}=Y(b(()=>+p.locationId),{includes:["images"]}),{mutateAsync:z,isPending:F}=K({onSuccess:()=>{f.add({severity:"success",summary:"Opgeslagen",detail:"De wijzigingen zijn succesvol opgeslagen."})}}),{mutateAsync:N,isPending:R}=X({onSuccess:()=>{f.add({severity:"success",summary:"Opgeslagen",detail:"De afbeeldingen zijn succesvol bijgewerkt."})}}),L=b(()=>F.value||R.value);B(()=>{l.value&&n.initializeLocation(l.value)});async function O(){var s;if(n.locationForm)try{if(n.hasLocationChanges&&await z({locationId:+p.locationId,data:n.locationForm}),n.hasImagesChanges){const t=JSON.parse(JSON.stringify((((s=l.value)==null?void 0:s.images)||[]).map(v=>({...v,locationId:+p.locationId}))));await N({locationId:+p.locationId,originalImages:t,currentImages:n.imagesForm})}n.updateSnapshots()}catch{f.add({severity:"error",summary:"Fout bij opslaan",detail:"Er is iets misgegaan bij het opslaan van de wijzigingen."})}}function c(s){const t={info:"dashboard.locations.detail.info",reservations:"dashboard.locations.detail.reservations",openings:"dashboard.locations.detail.openings",images:"dashboard.locations.detail.images",settings:"dashboard.locations.detail.settings"};x.push({name:t[s],params:{locationId:p.locationId}})}return(s,t)=>{const v=j("RouterLink"),U=j("RouterView");return m(),y(w,null,[i(H,null,{default:a(()=>{var _;return[o($)?(m(),d(q,{key:0})):!o(l)||o(T)?(m(),d(M,{key:1,title:"Locatie Niet Gevonden",message:"De locatie die je zoekt bestaat niet of je hebt geen toegang."})):(m(),y(w,{key:2},[i(G,{title:o(l).name,subtitle:((_=o(l).excerpt)==null?void 0:_.nl)||void 0},{actions:a(()=>[i(v,{to:{name:"locations.detail",params:{locationId:C.locationId}}},{default:a(()=>[i(o(I),{severity:"secondary"},{default:a(()=>[i(o(r),{icon:o(Z)},null,8,["icon"]),t[5]||(t[5]=e("span",null,"Bekijken",-1))]),_:1})]),_:1},8,["to"])]),_:1},8,["title","subtitle"]),e("div",ct,[i(o(J),{value:S.value,class:"text-sm"},{default:a(()=>[i(o(P),null,{default:a(()=>[i(o(u),{value:"info",onClick:t[0]||(t[0]=g=>c("info"))},{default:a(()=>[i(o(r),{icon:o(tt),class:"tab-icon"},null,8,["icon"]),t[6]||(t[6]=e("span",{class:"tab-label"},"Informatie",-1))]),_:1}),i(o(u),{value:"reservations",onClick:t[1]||(t[1]=g=>c("reservations"))},{default:a(()=>[i(o(r),{icon:o(ot),class:"tab-icon"},null,8,["icon"]),t[7]||(t[7]=e("span",{class:"tab-label"},"Reservaties",-1))]),_:1}),i(o(u),{value:"openings",onClick:t[2]||(t[2]=g=>c("openings"))},{default:a(()=>[i(o(r),{icon:o(it),class:"tab-icon"},null,8,["icon"]),t[8]||(t[8]=e("span",{class:"tab-label"},"Openingstijden",-1))]),_:1}),i(o(u),{value:"images",onClick:t[3]||(t[3]=g=>c("images"))},{default:a(()=>[i(o(r),{icon:o(at),class:"tab-icon"},null,8,["icon"]),t[9]||(t[9]=e("span",{class:"tab-label"},"Afbeeldingen",-1))]),_:1}),i(o(u),{value:"settings",class:"ml-auto",onClick:t[4]||(t[4]=g=>c("settings"))},{default:a(()=>[i(o(r),{icon:o(et),class:"tab-icon"},null,8,["icon"]),t[10]||(t[10]=e("span",{class:"tab-label"},"Instellingen",-1))]),_:1})]),_:1})]),_:1},8,["value"])]),e("div",dt,[i(U)])],64))]}),_:1}),(m(),d(A,{to:"body"},[i(h,{name:"slide-up"},{default:a(()=>[o(n).hasChanges?(m(),y("div",ut,[e("div",gt,[e("p",ft,[i(o(r),{icon:o(st),class:"mr-2"},null,8,["icon"]),t[11]||(t[11]=k(" Je hebt niet-opgeslagen wijzigingen. ",-1))]),e("div",vt,[i(o(I),{text:"",onClick:o(n).resetChanges,class:"text-slate-100 hover:underline"},{default:a(()=>[...t[12]||(t[12]=[k(" Ongedaan maken ",-1)])]),_:1},8,["onClick"]),i(o(I),{onClick:O,loading:L.value},{default:a(()=>[L.value?(m(),d(o(r),{key:0,icon:o(nt),spin:"",class:"mr-2"},null,8,["icon"])):(m(),d(o(r),{key:1,icon:o(rt),class:"mr-2"},null,8,["icon"])),t[13]||(t[13]=k(" Opslaan ",-1))]),_:1},8,["loading"])])])])):E("",!0)]),_:1})]))],64)}}}),ki=lt(bt,[["__scopeId","data-v-66838df6"]]);export{ki as default};
